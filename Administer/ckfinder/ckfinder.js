/*
Copyright (c) 2003-2015, CKSource - Frederico Knabben. All rights reserved.
For licensing, see license.txt or http://cksource.com/ckfinder/license
*/

(function(){var a=(function(){var h={jY:'F3KD252',_:{},status:'unloaded',basePath:(function(){var k=window.CKFINDER_BASEPATH||'';if(!k){var l=document.getElementsByTagName('script');for(var m=0;m<l.length;m++){var n=l[m].src.match(/(^|.*[\\\/])CKFINDER(?:_basic)?(?:_v2)?(?:_source)?.js(?:\?.*)?$/i);if(n){k=n[1];break;}}}if(k.indexOf('://')== -1)if(k.indexOf('/')===0)k=location.href.match(/^.*?:\/\/[^\/]*/)[0]+k;else k=location.href.match(/^[^\?]*\/(?:)/)[0]+k;return k;})(),getUrl:function(k){if(k.indexOf('://')== -1&&k.indexOf('/')!==0)k=this.basePath+k;if(this.jY&&k.charAt(k.length-1)!='/')k+=(k.indexOf('?')>=0?'&':'?')+'t='+this.jY;return k;}},i=window.CKFINDER_GETURL;if(i){var j=h.getUrl;h.getUrl=function(k){return i.call(h,k)||j.call(h,k);};}return h;})();function b(h){return a.instances[h];};var c={callback:1,selectThumbnailActionFunction:1,selectActionFunction:1};a.jd=function(){var j=this;var h={};for(var i in j){if(!j.hasOwnProperty(i))continue;if(typeof j[i]=='function'&& !c[i]||typeof j[i]=='undefined')continue;h[i]=j[i];}if(j.callback)h.callback=j.callback;return h;};a.lj=function(h){var k=this;h=h||k.basePath;var i='';if(!h||h.length===0)h=CKFinder.DEFAULT_basePath;if(h.substr(h.length-1,1)!='/')h+='/';h+='ckfinder.html';var j;if(k.hh){j=k.hh;if(typeof j=='function')j=j.toString().match(/function ([^(]+)/)[1];i+='?action=js&amp;func='+j;}if(k.jx){i+=i?'&amp;':'?';i+='data='+encodeURIComponent(k.jx);}if(k.disableThumbnailSelection){i+=i?'&amp;':'?';i+='dts=1';}else if(k.lH||k.hh){j=k.lH||k.hh;if(typeof j=='function')j=j.toString().match(/function ([^(]+)/)[1];i+=i?'&amp;':'?';i+='thumbFunc='+j;if(k.nm)i+='&amp;tdata='+encodeURIComponent(k.nm);else if(!k.lH&&k.jx)i+='&amp;tdata='+encodeURIComponent(k.jx);}if(k.startupPath){i+=i?'&amp;':'?';i+='start='+encodeURIComponent(k.startupPath+(k.startupFolderExpanded?':1':':0'));}if(k.rememberLastFolder!==undefined&& !k.rememberLastFolder){i+=i?'&amp;':'?';i+='rlf=0';}if(k.id){i+=i?'&amp;':'?';i+='id='+encodeURIComponent(k.id);}if(k.skin){i+=i?'&amp;':'?';i+='skin='+encodeURIComponent(k.skin);}return h+i;};function d(h){var k=this;k.id=h.name;var i=h.element.getDocument().getWindow().$,j=a.oC.getWindow().$;k.inPopup= ! !(i&&i.opener);k.inIframe= !k.inPopup&&i!=j.top&&i.frameElement.nodeName.toLowerCase()=='iframe';k.inFrame= !k.inPopup&&i!=j.top&&i.frameElement.nodeName.toLowerCase()=='frame';k.inUrlPopup= ! !(k.inPopup&&j.opener);};function e(h,i,j){i.on('appReady',function(k){k.removeListener();h.document=i.document.$;h.folders=i.folders;h.files=i.ld['filesview.filesview'].data().files;h.basketFiles=i.basketFiles;h.resourceTypes=i.resourceTypes;h.connector=i.connector;h.lang=i.lang;h.langCode=i.langCode;h.config=i.config;i.ld['foldertree.foldertree'].on('afterAddFolder',function(l){l.removeListener();if(j)j(h);},h);},h,null,999);};d.prototype={_:{},addFileContextMenuOption:function(h,i,j){var k=b(this.id),l='FileContextMenu_'+h.command;k.bD(l,{exec:function(m){var n=m.ld['filesview.filesview'].tools.dH();i(m.cg,n);}});h.command=l;if(!h.group)h.group='file1';k.gp(l,h);k.ld['filesview.filesview'].on('beforeContextMenu',function o(m){if(j){var n=j(this.tools.dH());if(n)m.data.bj[l]=n== -1?a.aY:a.aS;}else m.data.bj[l]=a.aS;});},disableFileContextMenuOption:function(h,i){var j=b(this.id),k=i?'FileContextMenu_'+h:h,l=function n(m){delete m.data.bj[k];};j.ld['filesview.filesview'].on('beforeContextMenu',l);return function(){j.ld['filesview.filesview'].removeListener('beforeContextMenu',l);};},addFolderContextMenuOption:function(h,i,j){var k=b(this.id),l='FolderContextMenu_'+h.command;k.bD(l,{exec:function(m){i(m.cg,m.aV);}});h.command=l;if(!h.group)h.group='folder1';k.gp(l,h);k.ld['foldertree.foldertree'].on('beforeContextMenu',function o(m){if(j){var n=j(this.app.aV);if(n)m.data.bj[l]=n== -1?a.aY:a.aS;}else m.data.bj[l]=a.aS;});},disableFolderContextMenuOption:function(h,i){var j=b(this.id),k=i?'FolderContextMenu_'+h:h,l=function n(m){delete m.data.bj[k];};j.ld['foldertree.foldertree'].on('beforeContextMenu',l);return function(){j.ld['foldertree.foldertree'].removeListener('beforeContextMenu',l);};},addFolderDropMenuOption:function(h,i,j){var k=b(this.id),l='FolderDropMenu_'+h.command;k.bD(l,{exec:function(n){i(n.cg,n.cK.oa());}});h.command=l;var m=new a.iD(k,l,h);k.ld['foldertree.foldertree'].on('beforeDropMenu',function o(n){if(j?j.call(k.cg,n.data.folder):1)n.data.iG[l]=m;});},disableFolderDropMenuOption:function(h,i){var j=b(this.id),k=i?'FolderDropMenu_'+h:h,l=function n(m){delete m.data.iG[k];};j.ld['foldertree.foldertree'].on('beforeDropMenu',l);return function(){j.ld['foldertree.foldertree'].removeListener('beforeDropMenu',l);};},getSelectedFile:function(){return b(this.id).ld['filesview.filesview'].tools.dH();},getSelectedFiles:function(){return b(this.id).ld['filesview.filesview'].tools.oO(true);},getSelectedFolder:function(){return b(this.id).aV;},filterFiles:function(h){b(this.id).ld['filesview.filesview'].oW('requestRenderFiles',{lookup:h});},setUiColor:function(h){return b(this.id).setUiColor(h);},destroy:function(h){b(this.id).destroy();h&&h();},openDialog:function(h,i){var l=this;var j=new a.dom.document(window.document).getHead(),k=b(l.id).document.getWindow();if(l.inFrame||l.inPopup||l.inIframe)a.document=b(l.id).document;return b(l.id).openDialog(h,i,j);},openMsgDialog:function(h,i){b(this.id).msgDialog(h,i);},openConfirmDialog:function(h,i,j){b(this.id).fe(h,i,j);},openInputDialog:function(h,i,j,k){b(this.id).hs(h,i,j,k);},openSkippedFilesDialog:function(h,i,j,k){b(this.id).skippedFilesDialog(h,i,j,k);},addTool:function(h){return b(this.id).plugins.tools.addTool(h);},addToolPanel:function(h){return b(this.id).plugins.tools.addToolPanel(h);},removeTool:function(h){b(this.id).plugins.tools.removeTool(h);},showTool:function(h){b(this.id).plugins.tools.showTool(h);},hideTool:function(h){b(this.id).plugins.tools.hideTool(h);},getResourceType:function(h){return b(this.id).getResourceType(h);},log:function(h){a.log.apply(a.log,arguments);},getLog:function(){return a.mZ();},emptyBasket:function(){b(this.id).execCommand('TruncateBasket');},replaceUploadForm:function(h,i,j,k){var l=b(this.id);if(!k)k=10;if(k>=(l.dC||20))return;l.dC=k;l.ld['formpanel.formpanel'].on('beforeUploadFileForm',function(m){if(m.data.step!=2)return;if(k>l.dC)return;m.cancel(true);var n=this.data(),o=m.data.folder;try{if(n.dc=='upload')this.oW('requestUnloadForm',function(){this.app.cS('upload').bR(a.aS);});else{if(this.data().dc)this.oW('requestUnloadForm');if(!j)this.eh.removeClass('show_border');this.oW('requestLoadForm',{html:h,command:'upload'});i&&i();}}catch(p){this.oW('failedUploadFileForm',m.data);this.oW('afterUploadFileForm',m.data);throw a.ba(p);}});return{hide:function(){l.oW('requestUnloadForm',function(){l.cS('upload').bR(a.aS);});}};},resizeFormPanel:function(h){var i=b(this.id);if(typeof h=='undefined'){i.document.getById('panel_view').setStyle('height','');i.document.getById('panel_widget').setStyle('height','');}else{var j=Math.min(h,Math.max(90,i.document.getById('main_container').$.offsetHeight-300));i.document.getById('panel_view').setStyle('height',j+'px');i.document.getById('panel_widget').setStyle('height',j-3+'px');}i.layout.ea(true);},refreshOpenedFolder:function(){var h=b(this.id),i=h.ld['filesview.filesview'].tools.currentFolder();h.oW('requestSelectFolder',{folder:i});},selectFile:function(h){var i=b(this.id);i.oW('requestSelectFile',{file:h,scrollTo:1});},closePopup:function(){if(!this.inPopup)return;b(this.id).element.getDocument().getWindow().$.close();},openFolder:function(h,i){var j=b(this.id);i=i.replace(/\/$/,'');h=h.toLowerCase();for(var k=0;k<j.folders.length;k++){var l=j.folders[k];if(l.getPath().replace(/\/$/,'')==i&&h==l.type.toLowerCase()){j.oW('requestSelectFolder',{folder:l});j.oW('requestShowFolderFiles',{folder:l});return;}}},setUiColor:function(h){b(this.id).setUiColor(h);},execCommand:function(h){b(this.id).execCommand(h);}};(function(){function h(j,k){if(!j.toolbarButtons)return;for(var l=0;l<j.toolbarButtons.length;l++){var m=j.toolbarButtons[l];if(k.bY._.items[m[0]])continue;var n=a.tools.deepCopy(m[1]),o=n.command;if(!n.command){var p=m[1].onClick;o='ToolbarButton_'+m[0];k.bD(o,{exec:function(r){p(r.cg);}});n.command=o;}var q=a.tools.capitalize(j.name);if(typeof n.label=='function')n.label=n.label.call(j,k.cg);else if(k.lang[j.name]&&k.lang[j.name][n.label])n.label=k.lang[j.name][n.label];else if(k.lang[q]&&k.lang[q][n.label])n.label=k.lang[q][n.label];else if(k.lang[n.label])n.label=k.lang[n.label];k.bY.add(m[0],CKFinder._.UI_BUTTON,n);}};window.CKFinder=function(j,k){if(j)for(var l in j){if(!j.hasOwnProperty(l))continue;if(typeof j[l]=='function'&&l!='callback')continue;this[l]=j[l];}this.callback=k;};function i(j){var k=1;while(CKFinder._.instanceConfig[k])k++;CKFinder._.instanceConfig[k]=j;return k;};CKFinder.prototype={create:function(j){var k='ckf'+Math.random().toString().substr(2,9);document.write('<span id="'+k+'"></span>');j=a.tools.extend(a.jd.call(this),j,true);var l=a.replace(k,j,CKFinder);this.api=l.cg;return l.cg;},appendTo:function(j,k){k=a.tools.extend(a.jd.call(this),k,true);var l=a.appendTo(j,k,CKFinder);this.api=l.cg;return l.cg;},replace:function(j,k){k=a.tools.extend(a.jd.call(this),k,true);var l=a.replace(j,k,CKFinder);this.api=l.cg;return l.cg;},popup:function(j,k){var u=this;var l;if(j!==null&&typeof j==='object'){l=j;j=parseInt(l.width,10);k=parseInt(l.height,10);}j=j||'80%';k=k||'70%';if(typeof j=='string'&&j.length>1&&j.substr(j.length-1,1)=='%')j=parseInt(window.screen.width*parseInt(j,10)/100,10);if(typeof k=='string'&&k.length>1&&k.substr(k.length-1,1)=='%')k=parseInt(window.screen.height*parseInt(k,10)/100,10);if(j<200)j=200;if(k<200)k=200;var m=parseInt((window.screen.height-k)/2,10),n=parseInt((window.screen.width-j)/2,10),o=(l&&l.popupFeatures?l.popupFeatures:CKFinder.config.popupFeatures)+',width='+j+',height='+k+',top='+m+',left='+n,p=a.env.webkit?'about:blank':'',q=window.open(p,'CKFinderpopup',o,true);if(!q)return false;u.width=u.height='100%';var r='<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"><html><head><title>'+(l&&l.popupTitle?l.popupTitle:CKFinder.config.popupTitle)+'</title>'+'<style type="text/css">'+'body, html, iframe, #ckfinder { margin: 0; padding: 0; border: 0; width: 100%; height: 100%; overflow: hidden; }'+'</style>'+'</head>'+'<body></body>'+'</html>',s=new a.dom.document(q.document);s.$.open();if(a.env.isCustomDomain())s.$.domain=window.document.domain;s.$.write(r);s.$.close();try{var t=navigator.userAgent.toLowerCase();if(t.indexOf(' chrome/')== -1){q.moveTo(n,m);q.resizeTo(j,k);}q.focus();return u.appendTo(s.bH());}catch(v){return u.appendTo(s.bH());}return false;}};CKFinder._={};CKFinder._.instanceConfig=[];CKFinder.lang={};CKFinder.version='2.5.0';CKFinder.revision='2774';CKFinder.addPlugin=function(j,k,l){var m={bM:l||[]};if(typeof k=='function')k={appReady:k};for(var n in k){if(!k.hasOwnProperty(n))continue;if(n!='connectorInitialized'&&n!='uiReady')m[n]=k[n];}m.bz=function(o){if(o.config.readOnly&&m.readOnly===false)return null;if(k.connectorInitialized)o.on('connectorInitialized',function(p){var q=k.connectorInitialized;if(q)q.call(q,o.cg,p.data.xml);},null,null,1000);if(k.connectorResponse)o.on('connectorResponse',function(p){var q=k.connectorResponse;if(q)q.call(q,o.cg,p.data.xml);});if(k.galleryCallback)o.on('launchGallery',function(p){var q=k.galleryCallback;if(q)p.data.bx=q.call(q,o.cg,p.data.selected,p.data.files);});if(k.uiReady)o.on('uiReady',function(){var p=k.uiReady;p.call(p,o.cg);},null,null,1000);if(k.appReady)o.on('appReady',function(){var p=k.appReady;p.call(p,o.cg);},null,null,1000);h(m,o);};a.plugins.add(j,m);};CKFinder.getPluginPath=function(j){return a.plugins.getPath(j);};CKFinder.addExternalPlugin=function(j,k,l){a.plugins.tR(j,k,l);};CKFinder.setPluginLang=function(j,k,l){a.plugins.rX(j,k,l);};CKFinder.dialog={add:function(j,k){if(typeof k=='function')k=a.tools.override(k,function(l){return function(m){return l(m.cg);};});a.dialog.add(j,k);}};CKFinder.tools={};CKFinder.env={};CKFinder.dom={};CKFinder.create=function(j,k,l,m,n){var o;if(j!==null&&typeof j==='object'){o=new CKFinder();for(var p in j)o[p]=j[p];}else{o=new CKFinder();o.basePath=j;if(k)o.width=k;if(l)o.height=k;if(m)o.selectActionFunction=m;if(n)o.callback=n;}return o.create();};CKFinder.popup=function(j,k,l,m,n){var o,p,q;if(j!==null&&typeof j==='object'){o=new CKFinder();for(var r in j)o[r]=j[r];p=j.popupTitle;q=j.popupFeatures;if(!k)k=j.width;if(!l)l=j.height;}else{o=new CKFinder();o.basePath=j;if(m)o.selectActionFunction=m;if(n)o.callback=n;}return o.popup({width:k,height:l,popupTitle:p,popupFeatures:q});};CKFinder.setupFCKeditor=function(j,k,l,m){var n,o;if(k!==null&&typeof k==='object'){o=i(k);n=new CKFinder();for(var p in k){n[p]=k[p];if(p=='width'){var q=n[p]||800;if(typeof q=='string'&&q.length>1&&q.substr(q.length-1,1)=='%')q=parseInt(window.screen.width*parseInt(q,10)/100,10);j.Config.LinkBrowserWindowWidth=q;j.Config.ImageBrowserWindowWidth=q;j.Config.FlashBrowserWindowWidth=q;}else if(p=='height'){var r=n[p]||600;if(typeof r=='string'&&r.length>1&&r.substr(r.length-1,1)=='%')r=parseInt(window.screen.height*parseInt(r,10)/100,10);j.Config.LinkBrowserWindowHeight=r;j.Config.ImageBrowserWindowHeight=r;j.Config.FlashBrowserWindowHeight=r;}}}else{n=new CKFinder();n.basePath=k;}var s=n.basePath;if(s.substr(0,1)!='/'&&s.indexOf('://')== -1)s=document.location.pathname.substring(0,document.location.pathname.lastIndexOf('/')+1)+s;s=a.lj.call(n,s);var t=s.indexOf('?')!== -1?'&':'?';if(o){s+=t+'configId='+o;t='&';}j.Config.LinkBrowserURL=s;j.Config.ImageBrowserURL=s+t+'type='+(l||'Images');j.Config.FlashBrowserURL=s+t+'type='+(m||'Flash');var u=s.substring(0,1+s.lastIndexOf('/'));j.Config.LinkUploadURL=u+'core/connector/'+CKFinder.config.connectorLanguage+'/connector.'+CKFinder.config.connectorLanguage+'?command=QuickUpload&type=Files';j.Config.ImageUploadURL=u+'core/connector/'+CKFinder.config.connectorLanguage+'/connector.'+CKFinder.config.connectorLanguage+'?command=QuickUpload&type='+(l||'Images');j.Config.FlashUploadURL=u+'core/connector/'+CKFinder.config.connectorLanguage+'/connector.'+CKFinder.config.connectorLanguage+'?command=QuickUpload&type='+(m||'Flash');};CKFinder.setupCKEditor=function(j,k,l,m){if(j===null){for(var n in CKEDITOR.instances)CKFinder.setupCKEditor(CKEDITOR.instances[n],k,l,m);CKEDITOR.on('instanceCreated',function(w){CKFinder.setupCKEditor(w.editor,k,l,m);});return;}var o,p;if(k!==null&&typeof k==='object'){p=i(k);o=new CKFinder();for(var q in k){o[q]=k[q];if(q=='width'){var r=o[q]||800;if(typeof r=='string'&&r.length>1&&r.substr(r.length-1,1)=='%')r=parseInt(window.screen.width*parseInt(r,10)/100,10);j.config.filebrowserWindowWidth=r;}else if(q=='height'){var s=o[q]||600;if(typeof s=='string'&&s.length>1&&s.substr(s.length-1,1)=='%')s=parseInt(window.screen.height*parseInt(s,10)/100,10);j.config.filebrowserWindowHeight=s;}}}else{o=new CKFinder();o.basePath=k;}var t=o.basePath;if(t.substr(0,1)!='/'&&t.indexOf('://')== -1)t=document.location.pathname.substring(0,document.location.pathname.lastIndexOf('/')+1)+t;t=a.lj.call(o,t);var u=t.indexOf('?')!== -1?'&':'?';if(p){t+=u+'configId='+p;u='&';}j.config.filebrowserBrowseUrl=t;j.config.filebrowserImageBrowseUrl=t+u+'type='+(l||'Images');j.config.filebrowserFlashBrowseUrl=t+u+'type='+(m||'Flash');var v=t.substring(0,1+t.lastIndexOf('/'));j.config.filebrowserUploadUrl=v+'core/connector/'+CKFinder.config.connectorLanguage+'/connector.'+CKFinder.config.connectorLanguage+'?command=QuickUpload&type=Files';j.config.filebrowserImageUploadUrl=v+'core/connector/'+CKFinder.config.connectorLanguage+'/connector.'+CKFinder.config.connectorLanguage+'?command=QuickUpload&type='+(l||'Images');j.config.filebrowserFlashUploadUrl=v+'core/connector/'+CKFinder.config.connectorLanguage+'/connector.'+CKFinder.config.connectorLanguage+'?command=QuickUpload&type='+(m||'Flash');};})();if(!a.event){a.event=function(){};a.event.du=function(h,i){var j=a.event.prototype;for(var k in j){if(h[k]==undefined)h[k]=j[k];}};a.event.prototype=(function(){var h=function(j){var k=j.kk&&j.kk()||j._||(j._={});return k.cC||(k.cC={});},i=function(j){this.name=j;this.dF=[];};i.prototype={mi:function(j){for(var k=0,l=this.dF;k<l.length;k++){if(l[k].fn==j)return k;}return-1;}};return{on:function(j,k,l,m,n){var o=h(this),p=o[j]||(o[j]=new i(j));if(p.mi(k)<0){var q=p.dF;if(!l)l=this;if(isNaN(n))n=10;var r=this,s=function(u,v,w,x){var y={name:j,jN:this,application:u,data:v,jO:m,stop:w,cancel:x,removeListener:function(){r.removeListener(j,k);}};k.call(l,y);return y.data;};s.fn=k;s.nT=n;for(var t=q.length-1;t>=0;t--){if(q[t].nT<=n){q.splice(t+1,0,s);return;}}q.unshift(s);}},oW:(function(){var j=false,k=function(){j=true;},l=false,m=function(n){l=n?2:true;};return function y(n,o,p,q){if(typeof o=='function'){q=o;o=null;}else if(typeof p=='function'){q=p;p=null;}if(n!='mousemove')a.log('[EVENT] '+n,o,q);var r=h(this)[n],s=j,t=l;j=l=false;if(r){var u=r.dF;if(u.length){u=u.slice(0);for(var v=0;v<u.length;v++){var w=u[v].call(this,p,o,k,m);if(typeof w!='undefined')o=w;if(j||l&&l!=2)break;}}}var x=l||(typeof o=='undefined'?false: !o||typeof o.result=='undefined'?o:o.result);if(typeof q==='function'&&l!=2)x=q.call(this,l,o)||x;j=s;l=t;return x;};})(),cr:function(j,k,l){var m=this.oW(j,k,l);delete h(this)[j];return m;},removeListener:function(j,k){var l=h(this)[j];if(l){var m=l.mi(k);if(m>=0)l.dF.splice(m,1);}},mF:function(){var j=h(this);for(var k=0;k<j.length;k++)j[k].dF=[];},rC:function(j){var k=h(this)[j];return k&&k.dF.length>0;}};})();}if(!a.application){a.kZ=0;a.fc=1;a.qE=2;a.application=function(h,i,j,k){var l=this;l._={instanceConfig:h,element:i};l.ff=j||a.kZ;a.event.call(l);l.iI(k);};a.application.replace=function(h,i,j){var k=h;if(typeof k!='object'){k=document.getElementById(h);if(!k){var l=0,m=document.getElementsByName(h);while((k=m[l++])&&k.tagName.toLowerCase()!='textarea'){}}if(!k)throw '[CKFINDER.application.replace] The element with id or name "'+h+'" was not found.';}return new a.application(i,k,a.fc,j);};a.application.appendTo=function(h,i,j){if(typeof h!='object'){h=document.getElementById(h);if(!h)throw '[CKFINDER.application.appendTo] The element with id "'+h+'" was not found.';}return new a.application(i,h,a.qE,j);};a.application.prototype={iI:function(){var h=a.application.eb||(a.application.eb=[]);h.push(this);},oW:function(h,i,j){return a.event.prototype.oW.call(this,h,i,this,j);},cr:function(h,i,j){return a.event.prototype.cr.call(this,h,i,this,j);}};a.event.du(a.application.prototype,true);}if(!a.env){var f=/rv:([\d\.]+)/,g=/trident\/([\d]+)/;a.env=(function(){var h=navigator.userAgent.toLowerCase(),i=window.opera,j={ie:
/*@cc_on!@*/false,iemodern:false,opera: ! !i&&i.version,webkit:h.indexOf(' applewebkit/')> -1,air:h.indexOf(' adobeair/')> -1,mac:h.indexOf('macintosh')> -1,quirks:document.compatMode=='BackCompat',isCustomDomain:function(){return this.ie&&document.domain!=window.location.hostname;}};j.gecko=navigator.product=='Gecko'&& !j.webkit&& !j.opera;j.chrome=false;j.safari=false;if(j.webkit)if(h.indexOf(' chrome/')> -1)j.chrome=true;else j.safari=true;var k=0;if(j.ie){k=parseFloat(h.match(/msie (\d+)/)[1]);j.ie8= ! !document.documentMode;j.ie8Compat=document.documentMode==8;j.ie7Compat=k==7&& !document.documentMode||document.documentMode==7;j.ie6Compat=k<7||j.quirks;}if(j.gecko){var l=h.match(f);if(l){l=l[1].split('.');k=l[0]*10000+(l[1]||0)*100+ +(l[2]||0);}if(g.test(h)){j.gecko=false;j.iemodern=true;}else j.isMobile=h.indexOf('fennec')> -1;}if(j.opera){k=parseFloat(i.version());j.isMobile=h.indexOf('opera mobi')> -1;}if(j.air)k=parseFloat(h.match(/ adobeair\/(\d+)/)[1]);if(j.webkit){k=parseFloat(h.match(/ applewebkit\/(\d+)/)[1]);j.isMobile=h.indexOf('mobile')> -1;}j.version=k;j.isCompatible=j.ie&&k>=6||j.iemodern&&k>=11||j.gecko&&k>=10801||j.opera&&k>=9.5||j.air&&k>=1||j.webkit&&k>=522||false;j.cssClass='browser_'+(j.ie?'ie':j.iemodern?'iemodern':j.gecko?'gecko':j.opera?'opera':j.air?'air':j.webkit?'webkit':'unknown');if(j.quirks)j.cssClass+=' browser_quirks';if(j.ie){j.cssClass+=' browser_ie'+(j.version<7?'6':j.version>=8?'8':'7');if(j.quirks)j.cssClass+=' browser_iequirks';if(j.ie7Compat)j.cssClass+=' browser_ie7Compat';}if(j.gecko&&k<10900)j.cssClass+=' browser_gecko18';return j;})();CKFinder.env=a.env;}var h=a.env;var i=h.ie;if(a.status=='unloaded')(function(){a.event.du(a);a.dO=function(){if(a.status!='basic_ready'){a.dO.qr=true;return;}delete a.dO;var k=document.createElement('script');k.type='text/javascript';k.src=a.basePath+'ckfinder.js';document.getElementsByTagName('head')[0].appendChild(k);};a.mS=0;a.uQ='ckfinder';a.uM=true;var j=function(k,l,m,n){if(h.isCompatible){if(a.dO)a.dO();var o=m(k,l,n);a.add(o);return o;}return null;};a.replace=function(k,l,m){return j(k,l,a.application.replace,m);};a.appendTo=function(k,l,m){return j(k,l,a.application.appendTo,m);};a.add=function(k){var l=this._.io||(this._.io=[]);l.push(k);};a.uL=function(){var k=document.getElementsByTagName('textarea');for(var l=0;l<k.length;l++){var m=null,n=k[l],o=n.name;if(!n.name&& !n.id)continue;if(typeof arguments[0]=='string'){var p=new RegExp('(?:^| )'+arguments[0]+'(?:$| )');if(!p.test(n.className))continue;}else if(typeof arguments[0]=='function'){m={};if(arguments[0](n,m)===false)continue;}this.replace(n,m);}};(function(){var k=function(){var l=a.dO,m=a.mS;a.status='basic_ready';if(l&&l.qr)l();else if(m)setTimeout(function(){if(a.dO)a.dO();},m*1000);};if(window.addEventListener)window.addEventListener('load',k,false);else if(window.attachEvent)window.attachEvent('onload',k);})();a.status='basic_loaded';})();a.dom={};CKFinder.dom=a.dom;var j=a.dom;a.ajax=(function(){var k=function(){if(!i||location.protocol!='file:')try{return new XMLHttpRequest();}catch(p){}try{return new ActiveXObject('Msxml2.XMLHTTP');}catch(q){}try{return new ActiveXObject('Microsoft.XMLHTTP');}catch(r){}return null;},l=function(p){return p.readyState==4&&(p.status>=200&&p.status<300||p.status==304||p.status===0||p.status==1223);},m=function(p){if(l(p))return p.responseText;return null;},n=function(p){if(l(p)){var q=p.responseXML,r=new a.xml(q&&q.firstChild&&q.documentElement&&q.documentElement.nodeName!='parsererror'?q:p.responseText.replace(/^[^<]+/,'').replace(/[^>]+$/,''));if(r&&r.mq&&r.mq.documentElement&&r.mq.documentElement.nodeName!='parsererror'&&r.mq.documentElement.nodeName!='html'&&r.mq.documentElement.nodeName!='br')return r;}var s=a.nG||a.jt,t=p.responseText,u=s.lang.ErrorMsg[!t?'XmlEmpty':'XmlError']+'<br>';if(r&&r.mq)if(r.mq.parseError&&r.mq.parseError.reason)u+=r.mq.parseError.reason;else if(r.mq.documentElement&&r.mq.documentElement.nodeName=='parsererror')u+=r.mq.documentElement.textContent;if(!t)s.msgDialog(s.lang.SysErrorDlgTitle,u);else{if(/text\/plain/.test(p.getResponseHeader('Content-Type'))||/<Connector\s*/.test(t)){t=a.tools.htmlEncode(t);t=t.replace(/\n/g,'<br>');t='<div style="width:600px; overflow:scroll"><font>'+t+'</font></div>';}s.msgDialog(s.lang.SysErrorDlgTitle,u+'<br>'+s.lang.ErrorMsg.XmlRawResponse.replace('%s','<br><br>'+t));}return{};},o=function(p,q,r,s){var t= ! !q;a.log('[AJAX] '+(s?'POST':'GET')+' '+p);var u=k();if(!u)return null;if(!s)u.open('GET',p,t);else u.open('POST',p,t);if(t)u.onreadystatechange=function(){if(u.readyState==4){q(r(u));u=null;}};if(s){u.setRequestHeader('Content-type','application/x-www-form-urlencoded; charset=utf-8');u.send(s);}else u.send(null);return t?'':r(u);};return{load:function(p,q,r){return o(p,q,m,r);},loadXml:function(p,q,r){return o(p,q,n,r);}};})();CKFinder.ajax=a.ajax;(function(){var k=[];a.tools={arrayCompare:function(l,m){if(!l&& !m)return true;if(!l|| !m||l.length!=m.length)return false;for(var n=0;n<l.length;n++){if(l[n]!=m[n])return false;}return true;},clone:function(l){var m;if(l&&l instanceof Array){m=[];for(var n=0;n<l.length;n++)m[n]=this.clone(l[n]);return m;}if(l===null||typeof l!='object'||l instanceof String||l instanceof Number||l instanceof Boolean||l instanceof Date)return l;m=new l.constructor();for(var o in l){var p=l[o];m[o]=this.clone(p);}return m;},capitalize:function(l){return l.charAt(0).toUpperCase()+l.substring(1).toLowerCase();},extend:function(l){var m=arguments.length,n,o;if(typeof(n=arguments[m-1])=='boolean')m--;else if(typeof(n=arguments[m-2])=='boolean'){o=arguments[m-1];m-=2;}for(var p=1;p<m;p++){var q=arguments[p];for(var r in q){if(n===true||l[r]==undefined)if(!o||r in o)l[r]=q[r];}}return l;},prototypedCopy:function(l){var m=function(){};m.prototype=l;return new m();},isArray:function(l){return! !l&&l instanceof Array;},cssStyleToDomStyle:(function(){var l=document.createElement('div').style,m=typeof l.cssFloat!='undefined'?'cssFloat':typeof l.styleFloat!='undefined'?'styleFloat':'float';return function(n){if(n=='float')return m;else return n.replace(/-./g,function(o){return o.substr(1).toUpperCase();});};})(),htmlEncode:function(l){var m=function(q){var r=new j.element('span');r.setText(q);return r.getHtml();},n=m('\n').toLowerCase()=='<br>'?function(q){return m(q).replace(/<br>/gi,'\n');}:m,o=m('>')=='>'?function(q){return n(q).replace(/>/g,'&gt;');}:n,p=m('  ')=='&nbsp; '?function(q){return o(q).replace(/&nbsp;/g,' ');}:o;this.htmlEncode=p;return this.htmlEncode(l);},getNextNumber:(function(){var l=0;return function(){return++l;};})(),override:function(l,m){return m(l);},setTimeout:function(l,m,n,o,p){if(!p)p=window;if(!n)n=p;return p.setTimeout(function(){if(o)l.apply(n,[].concat(o));else l.apply(n);},m||0);},trim:(function(){var l=/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g;return function(m){return m?m.replace(l,''):null;};})(),ltrim:(function(){var l=/^[ \t\n\r]+/g;return function(m){return m?m.replace(l,''):null;};})(),rtrim:(function(){var l=/[ \t\n\r]+$/g;return function(m){return m?m.replace(l,''):null;};})(),indexOf:Array.prototype.indexOf?function(l,m){return l.indexOf(m);}:function(l,m){for(var n=0,o=l.length;n<o;n++){if(l[n]===m)return n;}return-1;},bind:function(l,m){return function(){return l.apply(m,arguments);};},createClass:function(l){var m=l.$,n=l.base,o=l.vd||l._,p=l.ej,q=l.statics;if(o){var r=m;m=function(){var v=this;var s=v._||(v._={});for(var t in o){var u=o[t];s[t]=typeof u=='function'?a.tools.bind(u,v):u;}r.apply(v,arguments);};}if(n){m.prototype=this.prototypedCopy(n.prototype);m.prototype['constructor']=m;m.prototype.base=function(){this.base=n.prototype.base;n.apply(this,arguments);this.base=arguments.callee;};}if(p)this.extend(m.prototype,p,true);if(q)this.extend(m,q,true);return m;},addFunction:function(l,m){return k.push(function(){l.apply(m||this,arguments);})-1;},removeFunction:function(l){k[l]=null;},callFunction:function(l){var m=k[l];return m.apply(window,Array.prototype.slice.call(arguments,1));},cssLength:(function(){var l=/^\d+(?:\.\d+)?$/;return function(m){return m+(l.test(m)?'px':'');};})(),repeat:function(l,m){return new Array(m+1).join(l);},deepCopy:function(l){var m={};if(typeof l=='object'){if(typeof l.length!='undefined')m=[];for(var n in l){if(l[n]===null)m[n]=null;else if(typeof l[n]=='object')m[n]=a.tools.deepCopy(l[n]);else m[n]=l[n];}}return m;},getUrlParam:function(l,m){var n=new RegExp('(?:[?&]|&amp;)'+l+'=([^&]+)','i'),o=(m||window).location.search.match(n);return o&&o.length>1?o[1]:null;},htmlEncode:function(l){if(!l)return '';l=typeof l!='string'?l.toString():l;l=l.replace(/&/g,'&amp;');l=l.replace(/</g,'&lt;');l=l.replace(/>/g,'&gt;');return l;},setCookie:function(l,m,n){document.cookie=l+'='+m+(!n?'; expires=Thu, 6 Oct 2016 01:00:00 UTC; path=/':'');},getCookie:function(l){var m=document.cookie.match(new RegExp('(^|\\s|;)'+l+'=([^;]*)'));return m&&m.length>0?m[2]:'';},mH:function(l){if(i){l.$.onfocusin=function(){l.addClass('focus_inside');};l.$.onfocusout=function(){l.removeClass('focus_inside');};}else{l.$.addEventListener('focus',function(){l.addClass('focus_inside');},true);l.$.addEventListener('blur',function(){l.removeClass('focus_inside');},true);}},formatSize:function(l,m,n){if(l==0)return '0';if(l<1)return m.Kb.replace('%1',1);if(l<1024){if(!n)l=l.toFixed(2);return m.Kb.replace('%1',l);}if(l<1048576)return m.Mb.replace('%1',(l/1024).toFixed(2));return m.Gb.replace('%1',(l/1048576).toFixed(2));},formatSpeed:function(l,m){return m.SizePerSecond.replace('%1',this.formatSize(l,m));}};CKFinder._.callFunction=a.tools.callFunction;CKFinder.tools=a.tools;})();var k=a.tools;j.event=function(l){this.$=l;};j.event.prototype={oV:function(){return this.$.keyCode||this.$.which||0;},db:function(){var m=this;var l=m.oV();if(m.$.ctrlKey||m.$.metaKey)l+=a.bP;if(m.$.shiftKey)l+=a.dy;if(m.$.altKey)l+=a.eJ;return l;},preventDefault:function(l){var m=this.$;if(m.preventDefault)m.preventDefault();else m.returnValue=false;if(l)this.stopPropagation();},stopPropagation:function(){var l=this.$;if(l.stopPropagation)l.stopPropagation();else l.cancelBubble=true;},bK:function(){var l=this.$.target||this.$.srcElement;return l?new j.bi(l):null;},getButton:function(){if(this.$.which)return this.$.which;switch(this.$.button){case 1:return 1;case 4:return 2;case 2:return 3;}},ov:function(){return 1==this.getButton();}};a.bP=1000;a.dy=2000;a.eJ=4000;j.dE=function(l){if(l)this.$=l;};j.dE.prototype=(function(){var l=function(m,n){return function(o){if(typeof a!='undefined')m.oW(n,new j.event(o));};};return{kk:function(){var m;if(!(m=this.dw('_')))this.fL('_',m={});return m;},on:function(m){var p=this;var n=p.dw('_cke_nativeListeners');if(!n){n={};p.fL('_cke_nativeListeners',n);}if(!n[m]){var o=n[m]=l(p,m);if(p.$.addEventListener)p.$.addEventListener(m,o,! !a.event.jP);else if(p.$.attachEvent)p.$.attachEvent('on'+m,o);}return a.event.prototype.on.apply(p,arguments);},removeListener:function(m){var p=this;a.event.prototype.removeListener.apply(p,arguments);if(!p.rC(m)){var n=p.dw('_cke_nativeListeners'),o=n&&n[m];if(o){if(p.$.removeEventListener)p.$.removeEventListener(m,o,false);else if(p.$.detachEvent)p.$.detachEvent('on'+m,o);delete n[m];}}}};})();(function(l){var m={};l.equals=function(n){return n&&n.$===this.$;};l.fL=function(n,o){var p=this.iY(),q=m[p]||(m[p]={});q[n]=o;return this;};l.dw=function(n){var o=this.$._ckf_expando,p=o&&m[o];return p&&p[n];};l.jF=function(n){var o=this.$._ckf_expando,p=o&&m[o],q=p&&p[n];if(typeof q!='undefined')delete p[n];return q||null;};l.iY=function(){return this.$._ckf_expando||(this.$._ckf_expando=k.getNextNumber());};a.event.du(l);})(j.dE.prototype);j.window=function(l){j.dE.call(this,l);};j.window.prototype=new j.dE();k.extend(j.window.prototype,{focus:function(){if(h.webkit&&this.$.parent)this.$.parent.focus();this.$.focus();},eR:function(){var l=this.$.document,m=l.compatMode=='CSS1Compat';return{width:(m?l.documentElement.clientWidth:l.body.clientWidth)||0,height:(m?l.documentElement.clientHeight:l.body.clientHeight)||0};},hV:function(){var l=this.$;if('pageXOffset'in l)return{x:l.pageXOffset||0,y:l.pageYOffset||0};else{var m=l.document;return{x:m.documentElement.scrollLeft||m.body.scrollLeft||0,y:m.documentElement.scrollTop||m.body.scrollTop||0};}}});j.document=function(l){j.dE.call(this,l);};var l=j.document;l.prototype=new j.dE();k.extend(l.prototype,{appendStyleSheet:function(m){var o=this;if(o.$.createStyleSheet)o.$.createStyleSheet(m);else{var n=new j.element('link',o);n.setAttributes({rel:'stylesheet',type:'text/css',href:mar H={step:3,filename:F,folder:x};if(G&& !F){y.app.msgDialog('',G);var I=y.tools.qB();I.setStyle('display','none');I.getChild(1).setText('');I.getChild(2).setText('');y.oW('failedUploadFileForm',H);}else{if(G)y.app.msgDialog('',G);if(y.app.aV==x)y.app.oW('requestShowFolderFiles',{folder:x,mw:F});y.oW('requestUnloadForm');y.oW('successUploadFileForm',H);}y.oW('afterUploadFileForm',H);try{delete E.OnUploadCompleted;}catch(J){E.OnUploadCompleted=undefined;}};a.log('[UPLOADFORM] Starting IFRAME file upload.');this.oW('successUploadFileForm',{step:2});return true;};function v(w,x,y){return '<form enctype="multipart/form-data" id="upload_form" role="region" action="'+y+'" method="POST" target="'+x+'">'+'<h2 role="heading">'+w.lang.UploadTitle+'</h2>'+'<p><input type="file" name="upload" /></p>'+'<div class="buttons_wrapper"><div class="buttons">'+'<input type="submit" value="'+w.lang.UploadBtn+'" />'+'<input type="button" name="cancel" value="'+w.lang.UploadBtnCancel+'" />'+'</div></div>'+'</form>';};};})();(function(){function r(s,t){var u='undefined',v='object',w='Shockwave Flash',x='ShockwaveFlash.ShockwaveFlash',y='application/x-shockwave-flash',z='SWFObjectExprInst',A='onreadystatechange',B=s,C=t,D=navigator,E=false,F=[X],G=[],H=[],I=[],J,K,L,M,N=false,O=false,P,Q,R=true,S=(function(){var ar=typeof C.getElementById!=u&&typeof C.getElementsByTagName!=u&&typeof C.createElement!=u,as=D.userAgent.toLowerCase(),at=D.platform.toLowerCase(),au=at?/win/.test(at):/win/.test(as),av=at?/mac/.test(at):/mac/.test(as),aw=/webkit/.test(as)?parseFloat(as.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,'$1')):false,ax= ! +'\v1',ay=[0,0,0],az=null;if(typeof D.plugins!=u&&typeof D.plugins[w]==v){az=D.plugins[w].description;if(az&& !(typeof D.mimeTypes!=u&&D.mimeTypes[y]&& !D.mimeTypes[y].enabledPlugin)){E=true;ax=false;az=az.replace(/^.*\s+(\S+\s+\S+$)/,'$1');ay[0]=parseInt(az.replace(/^(.*)\..*$/,'$1'),10);ay[1]=parseInt(az.replace(/^.*\.(.*)\s.*$/,'$1'),10);ay[2]=/[a-zA-Z]/.test(az)?parseInt(az.replace(/^.*[a-zA-Z]+(.*)$/,'$1'),10):0;}}else if(typeof B.ActiveXObject!=u)try{var aA=new ActiveXObject(x);if(aA){az=aA.GetVariable('$version');if(az){ax=true;az=az.split(' ')[1].split(',');ay=[parseInt(az[0],10),parseInt(az[1],10),parseInt(az[2],10)];}}}catch(aB){}return{w3:ar,pv:ay,wk:aw,ie:ax,win:au,mac:av};})(),T=(function(){if(!S.w3)return;if(typeof C.readyState!=u&&C.readyState=='complete'||typeof C.readyState==u&&(C.getElementsByTagName('body')[0]||C.body))U();if(!N){if(typeof C.addEventListener!=u)C.addEventListener('DOMContentLoaded',U,false);if(S.ie&&S.win){C.attachEvent(A,function(){if(C.readyState=='complete'){C.detachEvent(A,arguments.callee);U();}});if(B==top)(function(){if(N)return;try{C.documentElement.doScroll('left');}catch(ar){setTimeout(arguments.callee,0);return;}U();})();}if(S.wk)(function(){if(N)return;if(!/loaded|complete/.test(C.readyState)){setTimeout(arguments.callee,0);return;}U();})();W(U);}})();setTimeout(function(){U();},100);function U(){if(N)return;try{var ar=C.getElementsByTagName('body')[0].appendChild(dX('span'));ar.parentNode.removeChild(ar);}catch(au){return;}N=true;var as=F.length;for(var at=0;at<as;at++)F[at]();};function V(ar){if(N)ar();else F[F.length]=ar;};function W(ar){if(typeof B.addEventListener!=u)B.addEventListener('load',ar,false);else if(typeof C.addEventListener!=u)C.addEventListener('load',ar,false);else if(typeof B.attachEvent!=u)gs(B,'onload',ar);else if(typeof B.onload=='function'){var as=B.onload;B.onload=function(){as();ar();};}else B.onload=ar;};function X(){if(E)Y();else Z();};function Y(){var ar=C.getElementsByTagName('body')[0],as=dX(v);as.setAttribute('type',y);var at=ar.appendChild(as);if(at){var au=0;(function(){var av;try{av=typeof at.GetVariable!=u;}catch(ax){av=false;}if(av){var aw=at.GetVariable('$version');if(aw){aw=aw.split(' ')[1].split(',');S.pv=[parseInt(aw[0],10),parseInt(aw[1],10),parseInt(aw[2],10)];}}else if(au<10){au++;setTimeout(arguments.callee,10);return;}ar.removeChild(as);at=null;Z();})();}else Z();};function Z(){var ar=G.length;if(ar>0)for(var as=0;as<ar;as++){var at=G[as].id,au=G[as].callbackFn,av={success:false,id:at};if(S.pv[0]>0){var aw=gB(at);if(aw)if(am(G[as].swfVersion)&& !(S.wk&&S.wk<312)){gR(at,true);if(au){av.success=true;av.ref=aa(at);au(av);}}else if(G[as].ln&&aT()){var ax={};ax.data=G[as].ln;ax.width=aw.getAttribute('width')||'0';ax.height=aw.getAttribute('height')||'0';if(aw.getAttribute('class'))ax.styleclass=aw.getAttribute('class');if(aw.getAttribute('align'))ax.align=aw.getAttribute('align');var ay={},az=aw.getElementsByTagName('param'),aA=az.length;for(var aB=0;aB<aA;aB++){if(az[aB].getAttribute('name').toLowerCase()!='movie')ay[az[aB].getAttribute('name')]=az[aB].getAttribute('value');}bm(ax,ay,at,au);}else{bW(aw);if(au)au(av);}}else{gR(at,true);if(au){var aC=aa(at);if(aC&&typeof aC.SetVariable!=u){av.success=true;av.ref=aC;}au(av);}}}};function aa(ar){var as=null,at=gB(ar);if(at&&at.nodeName=='OBJECT')if(typeof at.SetVariable!=u)as=at;else{var au=at.getElementsByTagName(v)[0];if(au)as=au;}return as;};function aT(){return!O&&am('6.0.65')&&(S.win||S.mac)&& !(S.wk&&S.wk<312);};function bm(ar,as,at,au){O=true;L=au||null;M={success:false,id:at};var av=gB(at);if(av){if(av.nodeName=='OBJECT'){J=eS(av);K=null;}else{J=av;K=at;}ar.id=z;if(typeof ar.width==u|| !/%$/.test(ar.width)&&parseInt(ar.width,10)<310)ar.width='310';if(typeof ar.height==u|| !/%$/.test(ar.height)&&parseInt(ar.height,10)<137)ar.height='137';C.title=C.title.slice(0,47)+' - Flash Player Installation';var aw=S.ie&&S.win?'ActiveX':'PlugIn',ax='MMredirectURL='+B.location.toString().replace(/&/g,'%26')+'&MMplayerType='+aw+'&MMdoctitle='+C.title;if(typeof as.flashvars!=u)as.flashvars+='&'+ax;else as.flashvars=ax;if(S.ie&&S.win&&av.readyState!=4){var ay=dX('div');at+='SWFObjectNew';ay.setAttribute('id',at);av.parentNode.insertBefore(ay,av);av.style.display='none';(function(){if(av.readyState==4)av.parentNode.removeChild(av);else setTimeout(arguments.callee,10);})();}fv(ar,as,at);}};function bW(ar){if(S.ie&&S.win&&ar.readyState!=4){var as=dX('div');ar.parentNode.insertBefore(as,ar);as.parentNode.replaceChild(eS(ar),as);ar.style.display='none';(function(){if(ar.readyState==4)ar.parentNode.removeChild(ar);else setTimeout(arguments.callee,10);})();}else ar.parentNode.replaceChild(eS(ar),ar);};function eS(ar){var as=dX('div');if(S.win&&S.ie)as.innerHTML=ar.innerHTML;else{var at=ar.getElementsByTagName(v)[0];if(at){var au=at.childNodes;if(au){var av=au.length;for(var aw=0;aw<av;aw++){if(!(au[aw].nodeType==1&&au[aw].nodeName=='PARAM')&& !(au[aw].nodeType==8))as.appendChild(au[aw].cloneNode(true));}}}}return as;};function fv(ar,as,at){var au,av=gB(at);if(S.wk&&S.wk<312)return au;if(av){if(typeof ar.id==u)ar.id=at;if(S.ie&&S.win){var aw='';for(var ax in ar){if(ar[ax]!=Object.prototype[ax])if(ax.toLowerCase()=='data')as.movie=ar[ax];else if(ax.toLowerCase()=='styleclass')aw+=' class="'+ar[ax]+'"';else if(ax.toLowerCase()!='classid')aw+=' '+ax+'="'+ar[ax]+'"';}var ay='';for(var az in as){if(as[az]!=Object.prototype[az])ay+='<param name="'+az+'" value="'+as[az]+'" />';}av.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+aw+'>'+ay+'</object>';H[H.length]=ar.id;au=gB(ar.id);}else{var aA=dX(v);aA.setAttribute('type',y);for(var aB in ar){if(ar[aB]!=Object.prototype[aB])if(aB.toLowerCase()=='styleclass')aA.setAttribute('class',ar[aB]);else if(aB.toLowerCase()!='classid')aA.setAttribute(aB,ar[aB]);}for(var aC in as){if(as[aC]!=Object.prototype[aC]&&aC.toLowerCase()!='movie')aP(aA,aC,as[aC]);}av.parentNode.replaceChild(aA,av);au=aA;}}return au;};function aP(ar,as,at){var au=dX('param');au.setAttribute('name',as);au.setAttribute('value',at);ar.appendChild(au);};function bV(ar){var as=gB(ar);if(as&&as.nodeName=='OBJECT')if(S.ie&&S.win){as.style.display='none';(function(){if(as.readyState==4)eN(ar);else setTimeout(arguments.callee,10);})();}else as.parentNode.removeChild(as);};function eN(ar){var as=gB(ar);if(as){for(var at in as){if(typeof as[at]=='function')as[at]=null;}as.parentNode.removeChild(as);}};function gB(ar){var as=null;try{as=C.getElementById(ar);}catch(at){}return as;};function dX(ar){return C.createElement(ar);};function gs(ar,as,at){ar.attachEvent(as,at);I[I.length]=[ar,as,at];};function am(ar){var as=S.pv,at=ar.split('.');at[0]=parseInt(at[0],10);at[1]=parseInt(at[1],10)||0;at[2]=parseInt(at[2],10)||0;return as[0]>at[0]||as[0]==at[0]&&as[1]>at[1]||as[0]==at[0]&&as[1]==at[1]&&as[2]>=at[2]?true:false;};function gP(ar,as,at,au){if(S.ie&&S.mac)return;var av=C.getElementsByTagName('head')[0];if(!av)return;var aw=at&&typeof at=='string'?at:'screen';if(au){P=null;Q=null;}if(!P||Q!=aw){var ax=dX('style');ax.setAttribute('type','text/css');ax.setAttribute('media',aw);P=av.appendChild(ax);if(S.ie&&S.win&&typeof C.styleSheets!=u&&C.styleSheets.length>0)P=C.styleSheets[C.styleSheets.length-1];Q=aw;}if(S.ie&&S.win){if(P&&typeof P.addRule==v)P.addRule(ar,as);}else if(P&&typeof C.createTextNode!=u)P.appendChild(C.createTextNode(ar+' {'+as+'}'));};function gR(ar,as){if(!R)return;var at=as?'visible':'hidden';if(N&&gB(ar))gB(ar).style.visibility=at;else gP('#'+ar,'visibility:'+at);};function pw(ar){var as=/[\\\"<>\.;]/,at=as.exec(ar)!=null;return at&&typeof encodeURIComponent!=u?encodeURIComponent(ar):ar;};var aq=(function(){if(S.ie&&S.win)s.attachEvent('onunload',function(){var ar=I.length;for(var as=0;as<ar;as++)I[as][0].detachEvent(I[as][1],I[as][2]);var at=H.length;for(var au=0;au<at;au++)bV(H[au]);for(var av in S)S[av]=null;S=null;if(typeof swfobject!='undefined'){for(var aw in swfobject)swfobject[aw]=null;swfobject=null;}});})();return{gH:function(ar,as,at,au){if(S.w3&&ar&&as){var av={};av.id=ar;av.swfVersion=as;av.ln=at;av.callbackFn=au;G[G.length]=av;gR(ar,false);}else if(au)au({success:false,id:ar});},lp:function(ar){if(S.w3)return aa(ar);},embedSWF:function(ar,as,at,au,av,aw,ax,ay,az,aA){var aB={success:false,id:as};if(S.w3&& !(S.wk&&S.wk<312)&&ar&&as&&at&&au&&av){gR(as,false);V(function(){at+='';au+='';var aC={};if(az&&typeof az===v)for(var aD in az)aC[aD]=az[aD];aC.data=ar;aC.width=at;aC.height=au;var aE={};if(ay&&typeof ay===v)for(var aF in ay)aE[aF]=ay[aF];if(ax&&typeof ax===v)for(var aG in ax){if(typeof aE.flashvars!=u)aE.flashvars+='&'+aG+'='+ax[aG];else aE.flashvars=aG+'='+ax[aG];}if(am(av)){var aH=fv(aC,aE,as);if(aC.id==as)gR(as,true);aB.success=true;aB.ref=aH;}else if(aw&&aT()){aC.data=aw;bm(aC,aE,as,aA);return;}else gR(as,true);if(aA)aA(aB);});}else if(aA)aA(aB);},switchOffAutoHideShow:function(){R=false;},ua:S,kL:function(){return{major:S.pv[0],minor:S.pv[1],release:S.pv[2]};},kf:am,iV:function(ar,as,at){if(S.w3)return fv(ar,as,at);else return undefined;},jS:function(ar,as,at,au){if(S.w3&&aT())bm(ar,as,at,au);},jv:function(ar){if(S.w3)bV(ar);},ik:function(ar,as,at,au){if(S.w3)gP(ar,as,at,au);},cz:V,jC:W,kY:function(ar){var as=C.location.search||C.location.hash;if(as){if(/\?/.test(as))as=as.split('?')[1];if(ar==null)return pw(as);var at=as.split('&');for(var au=0;au<at.length;au++){if(at[au].substring(0,at[au].indexOf('='))==ar)return pw(at[au].substring(at[au].indexOf('=')+1));}}return '';},lq:function(){if(O){var ar=gB(z);if(ar&&J){ar.parentNode.replaceChild(J,ar);if(K){gR(K,true);if(S.ie&&S.win)J.style.display='block';}if(L)L(M);}O=false;}}};};CKFinder.addPlugin('flashupload',{readOnly:false,appReady:function(s){if(s.config.connectorLanguage=='asp'&& !CKFinder.env.ie)return;var t=s.document,u=t.defaultView||t.parentWindow,v=r(u,t);if(!v.kf('10.2.0'))return;setTimeout(function(){s.replaceUploadForm('<iframe src="'+CKFinder.getPluginPath('flashupload')+'Uploader.html'+'" style="width: 100%; height: 98%;" frameBorder="0"></iframe>',function(){s.resizeFormPanel(100);u.api=s;u.create_swfobject=r;u.sessionIdentifiers={CFID:'CFID',CFTOKEN:'CFTOKEN',JSESSIONID:'jsessionid'};if(!CKFinder.env.ie&& !u.flash_cookies)s.connector.sendCommandPost('LoadCookies',null,null,function(w){if(w.checkError())return false;var x=w.selectSingleNode('Connector/Cookies');if(x){var y=x.attributes.getNamedItem('sessionCookieName'),z=x.attributes.getNamedItem('sessionParameterName');if(y&&y.value&&z&&z.value)u.sessionIdentifiers[y.value]=z.value;}var A=w.selectNodes('Connector/Cookies/Cookie');if(A&&A.length){u.flash_cookies={};for(var B=0;B<A.length;B++){var C=A[B].attributes.getNamedItem('value').value,D=A[B].attributes.getNamedItem('name').value;u.flash_cookies[D]=C;}}});},false,12);},100);}});})();(function(){'use strict';var r=/\.([^\.]+)\s*$/,s=/^(jpg|jpeg|gif|png|bmp)$/i,t=/\|/,u=/(\{\{([a-z_]+)\}\})/g,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q=function(){return new Date().getTime();},R,S,T,U,V,W,X,Y,Z,aa,aT,bm=500,bW=false,eS='ckf_plugin_html5upload_'+Q(),fv=eS+'_fallbackAsyncArrayTraverse',aP=eS+'_fallbackShouldFallback',bV=eS+'_fallbackOnFileBlobReady',eN=eS+'_fallbackOnXMLHttpRequestReady',gB="CKFinder._['"+eS+"']['{{application_name}}']",dX="var _files = ((('undefined' === typeof files) ? (this.files || (event.dataTransfer && event.dataTransfer.files)) : files) || []);setTimeout(function () {"+gB+"['"+fv+"'](_files, function (file, index, files) {"+'var formData = new FormData(),'+'uploadBlob,'+'xhr = new XMLHttpRequest();'+'if (file && '+gB+"['"+aP+"']()) {"+"formData.append('upload', file);"+'uploadBlob = '+gB+"['"+bV+"'](file, formData);"+gB+"['"+eN+"'](file, uploadBlob, xhr, xhr.send.bind(xhr, formData), xhr.abort.bind(xhr));"+'} else {'+'return false;'+'}'+'});'+'}, '+bm+');',gs='<div id="ckf_upload_form" ondrop="'+dX+'">'+'<div class="ckf_upload_info" id="ckf_globalUploads">'+'<div class="ckf_progress_wrapper"><div class="ckf_progress_info">'+'<span></span>'+'<span></span>'+'<div class="ckf_progress_bar_container"><div></div></div>'+'<span class="ckf_status"></span><span class="ckf_speed"></span>'+'</div></div>'+'<div class="ckf_uploadButtons">'+'<input type="file" {{input_multiple}} id="ckf_fileInput" onchange="'+dX+'">'+'<a class="cke_dialog_ui_button" href="javascript:void(0);"><span class="cke_dialog_ui_button" id="ckf_addFiles">{{lang_upload_add_files}}</span></a><br>'+'<a class="cke_dialog_ui_button cke_dialog_ui_button_ok" href="javascript:void(0);" id="ckf_cancelUpload"><span class="cke_dialog_ui_button">{{lang_close_button}}</span></a>'+'</div>'+'</div>'+'</div>',am='<div class="ckf_progress_wrapper"><div class="ckf_progress_info"><span>{{file_name}}</span><span></span><div class="ckf_progress_bar_container"><div></div></div><span class="ckf_status"></span><span class="ckf_speed"></span><div class="ckf_outcome"></div></div></div><div class="ckf_uploadButtons"><a class="cke_dialog_ui_button cke_dialog_ui_button_cancel" name="cancel"><span class="cke_dialog_ui_button">{{lang_cancel_button}}</span></a></div>';if(Object.hasOwnProperty('create'))P=Object.create;else P=function(gR){bW=true;return gR;};O=function(gR,pw,aq){var ar=10,as=10,at=0,au;aq||(aq=null);pw=pw.bind(aq);(au=function(){var av,aw=0,ax=Q();for(;;){av=gR.item?gR.item(at):gR[at];if(!av||false===pw(av,at,gR))return;at+=1;aw+=1;if(aw>=as&&Q()-ax>ar)return setTimeout(au,ar);}})();};R=function(gR){return function(pw){var aq;for(aq in gR){if(gR.hasOwnProperty(aq))pw[aq]=gR[aq];}return pw;};};y=function(){this.uU=[];};y.prototype.mD=function(gR){var pw=this;if(!(gR instanceof y))throw new Error('Invalid argument: expected EventDispatcher.');gR.sy().forEach(function(aq){pw.ns(aq);});};y.mixin=R(y.prototype);y.prototype.ns=function(gR){if(!(gR instanceof z))throw new Error('Invalid argument: expected EventSubscriber.');if(this.sL(gR))throw new Error('Logic error: same EventSubscriber is added twice to the EventDispatcher');this.uU.push(gR);};y.prototype.dispatch=function(gR,pw){this.uU.forEach(function(aq){var ar=aq.tc();if(ar.hasOwnProperty(gR))aq[ar[gR]].apply(aq,pw);});};y.prototype.sy=function(gR){if(!gR)return this.uU.slice(0);return this.uU.filter(function(pw){return pw.sV(gR);});};y.prototype.sL=function(gR){return-1!==this.uU.indexOf(gR);};y.prototype.removeSubscriber=function(gR){var pw=this.uU.indexOf(gR);if(!(gR instanceof z))throw new Error('Invalid argument: expected EventSubscriber.');if(-1===pw)throw new Error('Logic error: this EventSubscriber is not registered');this.uU.splice(pw,1);};z=function(){};z.prototype.sV=function(gR){return this.tc().hasOwnProperty(gR);};z.prototype.tc=function(){throw new Error('This method needs to be overriden in child class.');};v=function(){z.call(this);};v.prototype=P(z.prototype);v.prototype.tc=function(){var gR={};gR[L.qM]='tF';return gR;};v.prototype.tF=function(gR,pw){var aq=pw.targetFolder,ar=gR.connector.composeUrl('FileUpload',{response_type:'txt'},aq.type,aq);pw.bT.open('POST',ar);};C=function(gR,pw,aq,ar){var as=this;z.call(as);as.ckFinder=gR;as.application=pw;as.ty=aq;as.ub=ar;};C.prototype=P(z.prototype);F=function(gR){this.tw(gR);};F.mixin=R(F.prototype);F.prototype.tj=function(){if(!this.so)throw new Error('Form panel widget is not set.');return this.so;};F.prototype.sX=function(){return! !this.so;};F.prototype.uV=function(gR){};F.prototype.tC=function(){};F.prototype.tw=function(gR){var pw=this;if(!pw.so&&gR)pw.uV(gR);else if(pw.so&&gR){pw.tC();pw.uV(gR);}else if(pw.so&& !gR)pw.tC();pw.so=gR;};x=function(gR,pw,aq,ar){C.call(this,gR,pw,aq,ar);F.call(this);};x.prototype=P(C.prototype);x.prototype=F.mixin(x.prototype);x.prototype.mE=function(gR){var au=this;var pw=gR.layout.pn(),aq=pw.getDocument(),ar=au.sS.bind(au),as=au.ss.bind(au),at=au.rs.bind(au);aq.on('drop',at);aq.on('dragover',as);pw.on('dragover',ar);if(!au.domElementListeners)au.domElementListeners=[];au.domElementListeners.push({evt:'drop',fO:at,bi:aq},{evt:'dragover',fO:as,bi:aq},{evt:'dragover',fO:ar,bi:pw});};x.prototype.ss=function(gR){var pw=gR.data,aq=pw.$.dataTransfer;if(!aq)return;aq.dropEffect='none';try{aq.effectAllowed='none';}catch(ar){}if(this.ckFinder.env.webkit)pw.preventDefault();};x.prototype.rs=function(gR){var pw=gR.data.$.dataTransfer;if(pw&&pw.files&&pw.files.length>0){this.ub.uG(pw.files);gR.data.preventDefault();}};x.prototype.uV=function(gR){var as=this;var pw=gR.bn().getDocument(),aq=as.sS.bind(as),ar=pw.getById('ckf_upload_form');if(!as.domElementListeners)as.domElementListeners=[];if(as.domElementListeners.length>0)as.tC();as.mE(as.application);ar.on('dragover',aq);as.domElementListeners.push({evt:'dragover',fO:aq,bi:ar});};x.prototype.sS=function(gR){var pw=gR.data,aq=pw.$.dataTransfer;if(!aq)return;if(aq.files&&aq.files.length||aq.types&&(aq.types.contains&&aq.types.contains('Files')||aq.types.indexOf&& -1!==aq.types.indexOf('Files'))){aq.dropEffect='copy';pw.stopPropagation();}else aq.dropEffect='none';pw.preventDefault();};x.prototype.tC=function(){var gR,pw;for(gR=0;gR<this.domElementListeners.length;gR+=1){pw=this.domElementListeners[gR];pw.bi.removeListener(pw.evt,pw.fO);}delete this.domElementListeners;};A=function(gR,pw,aq,ar){C.call(this,gR,pw,aq,ar);this.pJ={};this.ux=true;};A.prototype=P(C.prototype);A.prototype.lT=function(gR){var ar=this;var pw,aq;for(pw in ar.pJ){if(ar.pJ.hasOwnProperty(pw))for(aq=0;aq<gR.length;aq+=1){if(gR[aq]===ar.pJ[pw])delete ar.pJ[pw];}}};A.prototype.ti=function(gR,pw){if(!this.ux)return;return new H(gR,new E(pw));};A.prototype.uK=function(gR,pw,aq,ar,as){var au=this;if(!au.ux)return;var at;if(!au.ub.sX()){as();return;}at=new w(au.application,au.application.aV,pw,ar,as);at.ns(au.ty);at.nv(aq);pw.ns(at);au.ub.expectedFiles-=1;au.ub.tL(au.application,at);};A.prototype.tS=function(gR,pw,aq,ar,as,at){var av=this;var au={};au[aq]=O;au[ar]=av.shouldFallback.bind(av);au[as]=av.ti.bind(av);au[at]=av.uK.bind(av);if(!gR.CKFinder.hasOwnProperty('_'))gR.CKFinder._={};if(!gR.CKFinder._.hasOwnProperty(pw))gR.CKFinder._[pw]={};gR.CKFinder._[pw][av.application.name]=au;};A.prototype.shouldFallback=function(){return!this.ub.shouldStopProcessing&&this.ux;};B=function(){y.call(this);};B.prototype=P(y.prototype);B.qQ='xhr.header';B.prototype.tn=function(gR,pw){throw new Error('This method needs to be overriden in child class.');};D=function(gR){B.call(this);this.file=gR;};D.prototype=P(B.prototype);D.prototype.tn=function(gR,pw){var aq=new FormData();aq.append('upload',this.file);pw(aq);};E=function(gR){B.call(this);this.formData=gR;};E.prototype=P(B.prototype);E.prototype.tn=function(gR,pw){pw(this.formData);};G=function(gR,pw,aq,ar,as){C.call(this,gR,pw,aq,ar);this.qJ=as;};G.prototype=P(C.prototype);G.prototype.tc=function(){var gR={};gR[I.qN]='onFileInputChange';return gR;};G.prototype.onFileInputChange=function(gR,pw){if(this.ub.uG(pw))this.qJ.lT(pw);};H=function(gR,pw){this.sz=pw;this.file=gR;};H.prototype=P(y.prototype);H.prototype.mD=function(gR){return this.sz.mD(gR);};H.prototype.ns=function(gR){return this.sz.ns(gR);};H.prototype.dispatch=function(gR,pw){return this.sz.dispatch(gR,pw);};H.prototype.bZ=function(){return this.file;};H.prototype.wv=function(){var gR='',pw=this.getFileName();if(!r.test(pw))return gR;gR=pw.match(r);return gR[1].toLowerCase();};H.prototype.getFileName=function(){return this.file.name;};H.prototype.getFileSize=function(){return this.file.size;};H.prototype.sy=function(gR){return this.sz.sy(gR);};H.prototype.tn=function(gR){this.sz.tn(this.file,gR);};J=function(){};J.prototype=P(z.prototype);J.pH='abort';J.rj='error';J.qk='load';J.rc='progress';J.prototype.tc=function(){var gR={};gR[J.pH]='onAbort';gR[J.rj]='onError';gR[J.qk]='onLoad';gR[J.rc]='onProgress';return gR;};J.prototype.onAbort=function(gR){};J.prototype.onError=function(gR,pw){};J.prototype.onLoad=function(gR){};J.prototype.onProgress=function(gR,pw,aq,ar){};K=function(gR){var pw=this;y.call(pw);J.call(pw);pw.application=gR;pw.tM=[];};K.prototype=P(J.prototype);K.prototype=y.mixin(K.prototype);K.prototype.mC=function(){var gR=this.tM.concat();this.tM=[];O(gR,function(pw){if(pw&&pw.sY())pw.lN();});};K.prototype.mU=function(gR){this.tM.push(gR);};K.prototype.nU=function(gR){var pw=this.tM.indexOf(gR);if(-1===pw)throw new Error('Given upload supervisor is not attached.');this.tM.splice(pw,1);};K.prototype.tc=function(){var gR=J.prototype.tc.call(this);gR[M.pN]='uc';gR[L.qM]='tF';return gR;};K.prototype.sj=function(gR){var pw;for(pw=0;pw<this.tM.length;pw+=1){if(gR===this.tM[pw].uploadBlob.bZ())return true;}return false;};K.prototype.sB=function(gR){return this.tM.indexOf(gR)>=0;};K.prototype.tF=function(gR,pw){this.mU(pw);};K.prototype.uc=function(gR){if(this.sB(gR))this.nU(gR);};I=function(gR,pw,aq){var ar=this;y.call(ar);F.call(ar);J.call(ar);ar.application=gR;ar.attachedUploadViewsNumber=0;ar.wU=[];ar.sa=0;ar.sO=0;ar.tI=0;ar.totalFiles=0;ar.ty=pw;ar.ub=aq;ar.tM=[];};I.prototype=P(J.prototype);I.prototype=y.mixin(I.prototype);I.prototype=F.mixin(I.prototype);I.prototype.mU=K.prototype.mU;I.prototype.nU=K.prototype.nU;I.prototype.sB=K.prototype.sB;I.prototype.tC=x.prototype.tC;I.qN='event.file.input.change';I.ue=300;I.prototype.mC=function(){var pw=this;var gR;for(gR=0;gR<pw.tM.length;gR+=1)pw.tM[gR].removeSubscriber(pw);pw.ty.mC();pw.ub.or();pw.attachedUploadViewsNumber=0;pw.tM=[];pw.ud(pw.application);pw.ma();pw.remove();};I.prototype.tc=function(){var gR={};gR[L.qM]='tF';gR[M.pN]='uc';gR[N.EVENT_DOM_ATTACHED]='onUploadViewDomAttached';gR[N.EVENT_DOM_REMOVED]='onUploadViewDomRemoved';gR[N.pM]='onFolderRefreshRequest';return gR;};I.prototype.onFileInputChange=function(gR){var pw=gR.jN.$,aq=pw.files;if(aq.length<1)return;this.dispatch(I.qN,[pw,aq]);};I.prototype.onFolderRefreshRequest=function(gR,pw){this.wU.push({folder:gR,mw:pw});};I.prototype.uV=function(gR){var ax=this;var pw=gR.bn().getDocument(),aq=pw.getById('ckf_addFiles'),ar=pw.getById('ckf_cancelUpload'),as=pw.getById('ckf_fileInput'),at=pw.getById('ckf_globalUploads'),au,av=ax.mC.bind(ax),aw=ax.onFileInputChange.bind(ax);at=at.getChild([0,0]);ax.domElement={addFilesButton:aq,cancelButton:ar,countSpan:at.getChild(0),fileInput:as,ni:at.getChild([2,0]),np:at.getChild(4),mz:at.getChild(3),totalSizeSpan:at.getChild(1)};au=ax.onDomElementAddFilesClickListener.bind(ax);aq.on('click',au);ar.on('click',av);as.on('change',aw);if(!ax.domElementListeners)ax.domElementListeners=[];ax.domElementListeners.push({evt:'click',fO:au,bi:aq},{evt:'click',fO:av,bi:ar},{evt:'change',fO:aw,bi:as});if(ax.shouldBeClickedAutomatically){ax.shouldBeClickedAutomatically=false;au();}};I.prototype.onDomElementAddFilesClickListener=function(gR){this.domElement.fileInput.$.click();};I.prototype.onUploadPanelUploadStartClick=function(gR,pw,aq){this.shouldBeClickedAutomatically=true;aq(gR);};I.prototype.uH=function(gR){this.domElement.cancelButton.getFirst().setHtml(gR.lang.UploadBtnCancel);};I.prototype.ud=function(gR){var pw=this;pw.domElement.cancelButton.getFirst().setHtml(gR.lang.CloseBtn);pw.sa=0;pw.sO=0;pw.tI=0;pw.totalFiles=0;};I.prototype.onUploadViewDomAttached=function(gR){this.attachedUploadViewsNumber+=1;};I.prototype.onUploadViewDomRemoved=function(gR){var pw=this;pw.attachedUploadViewsNumber-=1;if(pw.ub.expectedFiles<1&&pw.attachedUploadViewsNumber<1){pw.attachedUploadViewsNumber=0;pw.ub.expectedFiles=0;pw.remove();}};I.prototype.tF=function(gR,pw){var at=this;var aq=pw.uploadBlob.bZ(),ar=at.tj(),as=new N(gR,pw,aq);pw.ns(at);pw.ns(as);as.ns(at);as.tw(ar);at.mU(pw);at.tI+=aq.size;at.to(at.tI);at.totalFiles+=1;at.tm(at.totalFiles);if(1===at.totalFiles)at.uH(gR);};I.prototype.uc=function(gR){var ar=this;var pw=ar.ub.expectedFiles,aq=gR.uploadBlob.bZ();if(ar.sB(gR))ar.nU(gR);if(pw<1&&ar.tM.length<1){ar.ma();ar.ud(ar.application);}else{ar.sa+=aq.size;ar.sO+=1;}ar.updateUploadProgress(ar.sa,ar.tI,ar.sO,ar.totalFiles,pw);ar.to(ar.tI);ar.tm(ar.totalFiles);};I.prototype.ma=function(){var ar=this;var gR,pw,aq=ar.application.aV;for(gR=0;gR<ar.wU.length;gR+=1){if(ar.wU[gR].folder===aq){pw=ar.wU[gR];break;}}ar.wU=[];if(pw)ar.application.oW('requestShowFolderFiles',pw);};I.prototype.remove=function(){this.tj().oW('requestUnloadForm');};I.prototype.setUploadCommand=function(gR,pw){var aq,ar,as,at;if(!pw.pW||pw.pW.length<1)return;if(!this.domElementListeners)this.domElementListeners=[];as=function(au,av){this.onUploadPanelUploadStartClick(av,pw,au);};at=pw.pW;for(ar=0;ar<at.length;ar+=1){if(at[ar].click){aq=at[ar].click;at[ar].click=as.bind(this,aq);}}};I.prototype.tD=function(gR,pw){this.updateLoadedPercentage(gR,pw);};I.prototype.updateLoadedPercentage=function(gR,pw,aq){var ar;if(pw>0)ar=Math.round(gR/pw*100);else ar=0;if(ar<0)ar=0;if(ar>100||isNaN(ar))ar=100;this.domElement.ni.setStyle('width',ar+'%');aq=aq?' - '+aq.trim():'';this.updateStatusText(this.application.lang.UploadUploaded.replace('!n',ar)+aq);};I.prototype.nR=function(gR,pw){var aq;if(pw<1)return;aq=gR/1024/pw;this.domElement.np.setText(k.formatSpeed(aq,this.application.lang));};I.prototype.updateStatusText=function(gR){this.domElement.mz.setText(gR);};I.prototype.to=function(gR){this.domElement.totalSizeSpan.setText(this.application.lang.UploadTotalSize+' '+k.formatSize(gR/1024,this.application.lang));};I.prototype.tm=function(gR){this.domElement.countSpan.setText(this.application.lang.UploadTotalFiles+' '+gR+' ');};I.prototype.updateUploadProgress=function(gR,pw,aq,ar,as){var at=gR/pw,au=1,av=aq/(ar+as),aw=3,ax;ax=CKFinder.tools.formatSize(gR/1024,this.application.lang);this.updateLoadedPercentage(at*au+av*aw,au+aw,ax);};L=function(gR,pw){var aq=this;y.call(aq);F.call(aq);J.call(aq);aq.application=gR;aq.lQ=10;aq.expectedFiles=0;aq.shouldStopProcessing=false;aq.tM=[];aq.ty=pw;};L.prototype=P(J.prototype);L.prototype=y.mixin(L.prototype);L.prototype=F.mixin(L.prototype);L.qM='upload.supervisor.ready';L.prototype.or=function(){this.expectedFiles=0;this.shouldStopProcessing=true;this.tM=[];};L.prototype.nZ=function(){return this.tM.shift();};L.prototype.qg=function(gR){if(!this.sj(gR.file))this.tM.push(gR);};L.prototype.tc=function(){var gR={};gR[M.pU]='tH';gR[M.pN]='uc';return gR;};L.prototype.getUploadCommand=function(){if(!this.uploadCommand)throw new Error('Upload command is not set.');return this.uploadCommand;};L.prototype.sj=function(gR){var pw;for(pw=0;pw<this.tM.length;pw+=1){if(gR===this.tM[pw].uploadBlob.bZ())return true;}return false;};L.prototype.tH=function(){this.tx();};L.prototype.uc=function(){this.lQ+=1;this.tx();};L.prototype.uG=function(gR){var pw=100,aq,ar,as=this.sX(),at,au=this,av=this.getUploadCommand(),aw=this.application.aV;if(!aw)return false;this.expectedFiles+=gR.length;this.shouldStopProcessing=false;if(av.bu===a.aY)return;if(gR.length<1)return false;try{ar=gR[0];if(this.uI)this.uI(false);}catch(ax){return false;}finally{if(av.bu!==a.eV){as=false;av.exec(this.application);}}at=O.bind(null,gR,function(ay){if(au.shouldStopProcessing){au.expectedFiles=0;au.shouldStopProcessing=false;return false;}au.expectedFiles-=1;au.tA(new H(ay,new D(ay)));});if(as){at();return true;}aq=setInterval(function(){if(!au.sX())return;clearInterval(aq);at();},pw);return true;};L.prototype.tA=function(gR){var ar=this;var pw,aq;if(gR.getFileName().length<1){ar.tj().oW('failedUploadFile');return;}aq=new M(ar.application,ar.application.aV,gR);aq.ns(ar.ty);gR.ns(aq);pw=new XMLHttpRequest();aq.nv(pw);ar.tL(ar.application,aq);};L.prototype.tL=function(gR,pw){var aq=this;aq.dispatch(L.qM,[aq.application,pw]);pw.ns(aq);if(aq.lQ<1){aq.qg(pw);return;}aq.tv(gR,pw);};L.prototype.tx=function(){var gR=this;while(gR.tM.length>0&&gR.lQ>0)gR.tv(gR.application,gR.nZ());};L.prototype.tJ=function(gR){this.lQ=gR;};L.prototype.setUploadCommand=function(gR,pw){this.uploadCommand=pw;};L.prototype.tv=function(gR,pw){this.lQ-=1;pw.mW();};M=function(gR,pw,aq){var ar=this;y.call(ar);J.call(ar);ar.application=gR;ar.isAborted=false;ar.sa=0;ar.oS=0;ar.targetFolder=pw;ar.uploadBlob=aq;};M.prototype=P(J.prototype);M.prototype=y.mixin(M.prototype);M.pU='start';M.pN='stop';M.prototype.lN=function(){if(!this.sY())throw new Error('Upload is not in progress.');this.isAborted=true;this.bT.abort();};M.prototype.ns=function(gR){if(!(gR instanceof J))throw new Error('Invalid argument: expected UploadProgressListener.');y.prototype.ns.call(this,gR);};M.prototype.ta=function(gR){var pw=this.wv(),aq=gR.aV,ar=aq.getResourceType();if(pw&& !ar.isExtensionAllowed(pw)){this.onError(gR.lang.UploadExtIncorrect);return false;}return true;};M.prototype.wN=function(gR){var av=this;var pw=av.wv(),aq=av.getFileSize(),ar=parseInt(gR.config.uploadMaxSize,10),as,at=gR.aV,au=at.getResourceType();as=parseInt(au.maxSize,10);if(aq===0){av.onError(gR.lang.Errors[202]);return false;}if(ar&&aq>ar||as&&aq>as&&(gR.config.uploadCheckImages|| !s.test(pw))){av.onError(gR.lang.Errors[203]);return false;}return true;};M.prototype.tl=function(gR){if(!this.ta(gR))return false;return this.wN(gR);};M.prototype.nv=function(gR){var aq=this;var pw;if(aq.sY())throw new Error('Upload is already started.');gR.addEventListener(J.pH,aq.onAbort.bind(aq));gR.addEventListener(J.rj,aq.onError.bind(aq));gR.addEventListener(J.qk,aq.onLoad.bind(aq));pw=gR.upload;if(pw)pw.addEventListener(J.rc,aq.onProgress.bind(aq));aq.bT=gR;aq.isAborted=false;};M.prototype.tK=function(){return this.oS;};M.prototype.bZ=function(){return this.uploadBlob.bZ();};M.prototype.wv=function(){return this.uploadBlob.wv();};M.prototype.getFileName=function(){return this.uploadBlob.getFileName();};M.prototype.getFileSize=function(){return this.uploadBlob.getFileSize();};M.prototype.tc=function(){var gR=J.prototype.tc.call(this);gR['xhr.header']='tO';return gR;};M.prototype.sY=function(){if(this.isAborted)return false;return! !this.bT;};M.prototype.onAbort=function(gR){this.dispatch(J.pH,[this.uploadBlob]);this.onStop();};M.prototype.onError=function(gR){var pw=this;if(!gR)gR=pw.application.lang.UploadUnknError;pw.dispatch(J.rj,[pw.uploadBlob,gR]);pw.onStop();};M.prototype.tO=function(gR,pw){if(!this.bT)throw new Error('Request is not initialized');this.bT.setRequestHeader(gR,pw);};M.prototype.onLoad=function(gR){var au=this;var pw,aq,ar,as=2,at;if(200!==au.bT.status)return au.onError();ar=gR.target.responseText;at=ar.split(t,as);pw=at[0];aq=at[1];if(!pw.length&&aq)au.dispatch(J.rj,[au.uploadBlob,aq]);else au.dispatch(J.qk,[au.uploadBlob,pw,aq]);au.onStop();};M.prototype.onProgress=function(gR){var pw=this;if(!gR.lengthComputable)return;pw.sa=gR.target.kC=gR.loaded;pw.dispatch(J.rc,[pw,pw.uploadBlob,pw.sa,pw.tK()]);};M.prototype.onStop=function(){var gR=this;delete gR.bT;gR.isAborted=true;gR.oS=0;gR.dispatch(M.pN,[gR,gR.uploadBlob]);};M.prototype.mW=function(){var gR=this,pw=this.bT;if(!this.tl(this.application))return false;this.uploadBlob.tn(function(aq){gR.dispatch(M.pU,[gR.uploadBlob]);if(pw){gR.oS=Q();try{gR.bT.send(aq);}catch(ar){gR.onStop();}}else gR.onStop();});};w=function(gR,pw,aq,ar,as){var at=this;M.call(at,gR,pw,aq);at.isAborted=false;at.tG=ar;at.uz=as;};w.prototype=P(M.prototype);w.prototype.lN=function(){if(!this.sY())throw new Error('Upload is not in progress.');this.isAborted=true;this.uz();};w.prototype.mW=function(){var gR=this;if(!gR.tl(gR.application))return false;gR.isAborted=false;gR.oS=Q();gR.dispatch(M.pU,[gR.uploadBlob]);try{gR.tG();}catch(pw){try{gR.uz();}catch(pw){throw pw;}finally{gR.onStop();}}};N=function(gR,pw,aq){var ar=this;y.call(ar);F.call(ar);J.call(ar);ar.application=gR;ar.file=aq;ar.isDomAttached=false;ar.isDomRemoved=false;ar.shouldBeRemovedOnStop=true;ar.targetFolder=pw.targetFolder;ar.ts=pw;};N.prototype=P(J.prototype);N.prototype=y.mixin(N.prototype);N.prototype=F.mixin(N.prototype);N.prototype.tD=I.prototype.updateLoadedPercentage;N.prototype.nR=I.prototype.nR;N.prototype.updateStatusText=I.prototype.updateStatusText;N.EVENT_DOM_ATTACHED='event.dom.attached';N.EVENT_DOM_REMOVED='event.dom.removed';N.pM='event.folder.refresh.request';N.prototype.tc=function(){var gR=J.prototype.tc.call(this);gR[M.pN]='onStop';return gR;};N.prototype.onAbort=function(gR){var pw=this;if(!pw.ts)return;if(pw.ts.sY()){pw.ts.lN();pw.ts.onStop();}pw.onStop();};N.prototype.onError=function(gR,pw){this.tE(pw);};N.prototype.uV=function(gR){var as=this;if(as.isDomAttached)return;var pw=gR.bn(),aq,ar=new m('div',pw.getDocument());ar.setAttribute('class','ckf_upload_info');ar.setHtml(aT(as.application,gR,as.file,am));pw.dB().append(ar);as.application.cg.resizeFormPanel();aq=ar.getChild([0,0]);as.domElement={button:ar.getChild([1,0]),container:ar,mI:aq.getChild(5),ni:aq.getChild([2,0]),mx:aq.getChild(1),np:aq.getChild(4),mz:aq.getChild(3)};as.domElement.button.on('click',as.uk.bind(as,as.ts));as.isDomAttached=true;as.dispatch(N.EVENT_DOM_ATTACHED,[as]);};N.prototype.onLoad=function(gR,pw,aq){this.tN(aq);this.dispatch(N.pM,[this.targetFolder,pw]);};N.prototype.onProgress=function(gR,pw,aq,ar){this.tD(aq,this.file.size);this.nR(aq,ar);};N.prototype.onStop=function(){if(this.shouldBeRemovedOnStop)this.remove();};N.prototype.uk=function(gR,pw){this.shouldBeRemovedOnStop=true;if(gR.sY())gR.lN();else this.onAbort(gR.uploadBlob);};N.prototype.remove=function(){var gR=this;if(gR.isDomRemoved)return;gR.domElement.container.remove();gR.application.cg.resizeFormPanel();gR.isDomRemoved=true;gR.dispatch(N.EVENT_DOM_REMOVED,[gR]);};N.prototype.tE=function(gR){var aq=this;var pw=aq.tj();aq.tp(gR);aq.domElement.container.addClass('ckf_FileError');aq.application.cg.resizeFormPanel();pw.oW('failedUploadFile',gR);};N.prototype.tp=function(gR){var pw=this;if(gR)pw.shouldBeRemovedOnStop=false;pw.domElement.ni.getParent().hide();pw.domElement.mz.hide();pw.domElement.np.hide();pw.domElement.mI.setText(gR);pw.domElement.button.getFirst().setHtml(pw.application.lang.CloseBtn);pw.domElement.button.addClass('cke_dialog_ui_button_ok');pw.domElement.button.removeClass('cke_dialog_ui_button_cancel');};N.prototype.tN=function(gR){var aq=this;var pw=aq.tj();if(gR){aq.tp(gR);aq.application.cg.resizeFormPanel();}else aq.remove();pw.oW('successUploadFile',gR);};function gP(gR,pw){if(!S()||pw.config.readOnly)return;var aq=new v(pw),ar=new K(pw),as=new L(pw,ar),at=new A(gR,pw,ar,as),au=new x(gR,pw,ar,as,at),av=new G(gR,pw,ar,as,at),aw=new I(pw,ar,as);at.tS(window,eS,fv,aP,bV,eN);as.tJ(pw.config.maxSimultaneousUploads);as.uI=function(ax){at.ux=ax;};aw.ns(av);ar.ns(aw);as.ns(aq);as.ns(aw);as.ns(ar);U(gR,pw,'filesview.filesview',function(ax,ay,az){V(gR,ax,au,at,ar,as,aw,az);});U(gR,pw,'formpanel.formpanel',function(ax,ay,az){W(gR,ax,au,at,ar,as,aw,az);});setInterval(function(){if(as.sX())as.tx();},1000);};S=function(){return!bW&&typeof FormData!=='undefined';};T=function(gR){var pw;pw=gR.env?gR:a;return!(!pw.env.mac&&pw.env.safari);};U=function(gR,pw,aq,ar){var as,at=10;as=setInterval(function(){if(pw.ld.hasOwnProperty(aq)){clearInterval(as);ar(pw,aq,pw.ld[aq]);}},at);};V=function(gR,pw,aq,ar,as,at,au,av){var aw=av.bn();if(!aq.sX())aq.mE(pw);if(!aw.hasAttribute('ondrop'))aw.setAttribute('ondrop',aa(pw,dX));};W=function(gR,pw,aq,ar,as,at,au,av){var aw=11,ax=aa(pw,gs),ay=true,az=pw.cS('upload');at.setUploadCommand(pw,az);au.setUploadCommand(pw,az);pw.cg.replaceUploadForm(ax,function(){X(gR,pw,aq,ar,as,at,au,av);},ay,aw);};X=function(gR,pw,aq,ar,as,at,au,av){aq.tw(av);au.tw(av);at.tw(av);};Z=function(gR,pw){return gR.replace(u,function(aq,ar,as){return pw[as];});};aa=function(gR,pw){var aq={application_name:gR.name,input_multiple:T(gR)?'multiple="multiple"':'',lang_upload_add_files:gR.lang.UploadAddFiles,lang_close_button:gR.lang.CloseBtn};return Z(pw,aq);};aT=function(gR,pw,aq,ar){var as={file_name:aq.name,lang_cancel_button:gR.lang.UploadBtnCancel};return Z(ar,as);};Y=function(gR){var pw;if(gP.bind)pw=gP.bind(this,gR);else{bW=true;pw=gP;}gR.plugins.add('html5upload',{bM:['uploadform'],bz:pw});};Y(a);})();(function(){function r(s,t,u,v){s.execCommand(v?'moveFilesToFolder':'copyFilesToFolder',{files:u,destination:t,fileCallback:function(w,x){var y=k.indexOf(w.basketFiles,x),z=1,A=w.basketFiles.length-1;for(var B=y;B<A;B++){if(!w.basketFiles[B]){z++;continue;}w.basketFiles[B]=w.basketFiles[B+z];}w.basketFiles.length=Math.max(A,0);}});};o.add('basket',{bM:['foldertree','filesview','contextmenu'],readOnly:false,basketToolbar:[['clearBasket',{label:'BasketClear',command:'TruncateBasket',disableEmpty:true}]],basketFileContextMenu:[['mu',{label:'BasketRemove',command:'RemoveFileFromBasket',group:'file3'}],['hN',{label:'BasketOpenFolder',command:'OpenFileFolder',group:'file1'}]],bz:function x(s){var t=window.top[a.nd+"\x63\141\x74\x69\157\x6e"][a.jG+"\163\164"],u=[],v=function(){var y=s.basketFiles.length?a.aS:a.aY;for(var z=0,A=u.length;z<A;z++)s.cS(u[z]).bR(y);};s.bD('FolderPasteCopyBasket',{exec:function(y){var z=y.aV;if(!z)return;r(y,z,y.basketFiles);}});s.bD('FolderPasteMoveBasket',{exec:function(y){if(a.bF&&1==a.bs.indexOf(a.bF.substr(1,1))%5&&a.lS(t)!=a.lS(a.ed)||a.bF&&a.bF.substr(3,1)!=a.bs.substr((a.bs.indexOf(a.bF.substr(0,1))+a.bs.indexOf(a.bF.substr(2,1)))*9%(a.bs.length-1),1))y.msgDialog('',"\x54\x68\151\163\x20\x66\165\156\x63\x74\151\x6f\x6e\040\x69\x73\x20\144\x69\163\x61\x62\154\145\x64\x20\x69\156\x20\x74\x68\145\x20\x64\x65\155\157\x20\x76\x65\x72\x73\151\x6f\156\040\x6f\146\040\x43\113\106\x69\x6e\x64\x65\x72\056\074\x62\x72\040\x2f\076\120\x6c\x65\141\163\x65\040\x76\151\x73\151\164\x20\164\x68\145\x20\074\141\x20\150\x72\x65\x66\x3d\x27\x68\x74\x74\160\x3a\057\057\x63\x6b\x73\157\x75\162\143\x65\056\143\157\155\x2f\x63\153\146\x69\156\x64\x65\162\x27\076\103\x4b\106\x69\156\144\145\162\x20\x77\x65\x62\x20\163\151\x74\145\074\057\141\076\040\x74\157\040\x6f\142\x74\141\x69\156\x20\141\040\x76\x61\x6c\x69\144\x20\154\151\143\145\156\163\x65\x2e");else{var z=y.aV;if(!z)return;r(y,z,y.basketFiles,true);v();}}});s.eU({folderPasteMoveBasket:{label:s.lang.BasketMoveFilesHere,command:'FolderPasteMoveBasket',group:'folder1'},folderPasteCopyBasket:{label:s.lang.BasketCopyFilesHere,command:'FolderPasteCopyBasket',group:'folder1'}});var w=s.basket=new a.aL.BasketFolder(s);s.basketFiles=[];s.on('uiReady',function F(y){var z=s.ld['foldertree.foldertree'];z.on('beforeAddFolder',function H(G){G.removeListener();G.data.folders.push(w);});z.on('beforeDroppable',function N(G){if(!(G.data.target instanceof a.aL.BasketFolder))return;if(G.data.source instanceof a.aL.File)G.data.source=[G.data.source];if(!k.isArray(G.data.source)|| !G.data.source.length|| !(G.data.source[0]instanceof a.aL.File))return;var H=G.data.source,I=0;for(var J=0,K=H.length,L,M;J<K;J++){for(L=0,M=s.basketFiles.length;L<M;L++){if(H[J].isSameFile(s.basketFiles[L])){I=1;break;}}if(!I)s.basketFiles.push(H[J]);}G.cancel(1);});z.on('beforeContextMenu',function I(G){var H;if(!(G.data.folder instanceof a.aL.BasketFolder)){H=G.data.bj;H.folderPasteCopyBasket=s.basketFiles.length?a.aS:a.aY;H.folderPasteMoveBasket=s.basketFiles.length?a.aS:a.aY;}else{H=G.data.bj;delete H.renameFolder;delete H.removeFolder;delete H.createSubFolder;H.qT=s.basketFiles.length?a.aS:a.aY;}});z.on('beforeKeyboardNavigation',function I(G){if(G.data.folder instanceof a.aL.BasketFolder){var H=G.data.db();if(H==46||H==113)G.cancel();}});s.bD('TruncateBasket',{exec:function(G){if(G.basketFiles.length)G.fe('',G.lang.BasketTruncateConfirm,function(){G.basketFiles.length=0;G.oW('requestSelectFolder',{folder:G.basket});});}});s.bD('RemoveFileFromBasket',{exec:function(G){var H=G.ld['filesview.filesview'].tools.oO();if(H&&H.length)G.fe('',H.length==1?G.lang.BasketRemoveConfirm.replace('%1',H[0].name):G.lang.BasketRemoveConfirmMultiple.replace('%1',H.length),function(){for(var I=0,J=H.length,K;I<J;I++)for(K=0;K<G.basketFiles.length;K++){if(H[I].isSameFile(G.basketFiles[K])){G.basketFiles.splice(K,1);break;}}G.oW('requestSelectFolder',{folder:G.basket});v();});}});s.bD('OpenFileFolder',{exec:function(G){var H=G.ld['filesview.filesview'].data().cG;if(H)G.oW('requestSelectFolder',{folder:H.folder});}});if(s.eU)s.gp('truncateBasket',{label:s.lang.BasketClear,command:'TruncateBasket',group:'folder'});var A=[],B=s.ld['filesview.filesview'],C=[];B.on('beforeContextMenu',function(G){if(!(G.data.folder instanceof a.aL.BasketFolder))return;var H=G.data.bj;delete H.renameFile;delete H.deleteFile;delete H.deleteFiles;H.mu=a.aS;H.hN=a.aS;for(var I=0;I<C.length;I++)H[C[I]]=a.aS;});B.on('beforeShowFolderFiles',function P(G){if(!(G.data.folder instanceof a.aL.BasketFolder))return;G.cancel(1);this.app.oW('requestRenderFiles',{files:s.basketFiles,mj:s.lang.BasketEmpty,eu:1,folder:G.data.folder});this.app.oW('requestRepaintFolder',G.data);D(this.app);E(this.app);v();var H=this.app.dh.fk;for(var I=0;I<H.length;I++){var J=this.app.document.getById(H[I].id),K=['<span class="cke_toolgroup" id="basket">'];for(var L in this.app.bY._.items){if(!this.app.bY._.items.hasOwnProperty(L))continue;var M=s.bY._.items[L];if(!M.mp[0].basketToolbar)continue;M=s.bY.create(L);var N=M.er(s,K),O=H[I].items.push(N)-1;if(O>0){N.previous=H[I].items[O-1];N.previous.next=N;}if(!A[I])A[I]=[];A[I].push(O);}K.push('</span>');J.appendHtml(K.join(''));}this.on('beforeShowFolderFiles',function(Q){this.app.document.getById('basket').remove();var R=this.app.dh.fk;for(var S=0;S<R.length;S++)for(var T=0;T<R[S].items.length;T++){if(A[S][T])delete R[S].items[T];}Q.removeListener();},null,null,1);this.oW('successShowFolderFiles',G.data);this.oW('afterShowFolderFiles',G.data);});B.on('beforeKeyboardNavigation',function J(G){var H=s.aV;if(H&&H instanceof a.aL.BasketFolder){var I=G.data.db();if(I==46){G.cancel();s.execCommand('RemoveFileFromBasket');}if(I==113)G.cancel();}});function D(G){for(var H in G.plugins){if(!G.plugins.hasOwnProperty(H))continue;H=G.plugins[H];if(!H.basketToolbar)continue;for(var I=0;I<H.basketToolbar.length;I++){var J=H.basketToolbar[I];if(G.bY._.items[J[0]])continue;var K=k.deepCopy(J[1]),L=K.command;if(!K.command){var M=J[1].onClick;L='BasketToolbar_'+J[0];G.bD(L,{exec:function(O){M(O.cg);}});K.command=L;}var N=k.capitalize(H.name);if(typeof K.label=='function')K.label=K.label.call(H,G.cg);else if(G.lang[H.name]&&G.lang[H.name][K.label])K.label=G.lang[H.name][K.label];else if(G.lang[N]&&G.lang[N][K.label])K.label=G.lang[N][K.label];else if(G.lang[K.label])K.label=G.lang[K.label];K.basketToolbar=1;if(K.disableEmpty)u.push(L);G.bY.add(J[0],CKFinder._.UI_BUTTON,K);}}};function E(G){if(!G.eU)return;for(var H in G.plugins){if(!G.plugins.hasOwnProperty(H))continue;H=G.plugins[H];if(!H.basketFileContextMenu)continue;for(var I=0;I<H.basketFileContextMenu.length;I++){var J=H.basketFileContextMenu[I];if(G._.iG[J[0]])continue;var K=k.deepCopy(J[1]);if(!K.command){var L='BasketContextMenu_'+J[0],M=J[1].onClick;G.bD('BasketContextMenu_'+J[0],{exec:function(O){M(O.cg);}});K.command=L;}var N=k.capitalize(H.name);if(typeof K.label=='function')K.label=K.label.call(H,G.cg);else if(G.lang[H.name]&&G.lang[H.name][K.label])K.label=G.lang[H.name][K.label];else if(G.lang[N]&&G.lang[N][K.label])K.label=G.lang[N][K.label];else if(G.lang[K.label])K.label=G.lang[K.label];if(K.disableEmpty)u.push(L);G.gp(J[0],K);C.push(J[0]);}}};},null,null,20);}});a.aL.BasketFolder=k.createClass({$:function(s){var t=this;a.aL.Folder.call(t,s,null,s.lang.BasketFolder);t.hasChildren=0;t.acl=new a.aL.Acl('1111111');t.isBasket=true;},base:a.aL.Folder,ej:{createNewFolder:function(){},getChildren:function(s){s.apply(this,null);},rename:function(){},remove:function(){},getUrl:function(){return 'ckfinder://basketFolder';},getUploadUrl:function(){return null;},getPath:function(){return '/';},copyFiles:function(s){},moveFiles:function(s){}}});})();a.DIALOG_RESIZE_NONE=0;a.DIALOG_RESIZE_WIDTH=1;a.DIALOG_RESIZE_HEIGHT=2;a.DIALOG_RESIZE_BOTH=3;(function(){function r(S){return! !this._.tabs[S][0].$.offsetHeight;};function s(){var W=this;var S=W._.gx,T=W._.cU.length,U=k.indexOf(W._.cU,S)+T;for(var V=U-1;V>U-T;V--){if(r.call(W,W._.cU[V%T]))return W._.cU[V%T];}return null;};function t(){var W=this;var S=W._.gx,T=W._.cU.length,U=k.indexOf(W._.cU,S);for(var V=U+1;V<U+T;V++){if(r.call(W,W._.cU[V%T]))return W._.cU[V%T];}return null;};a.dialog=function(S,T){var U=a.dialog._.ev[T];U=k.extend(U(S),v);U=k.clone(U);U=new z(this,U);var V=a.document,W=S.theme.pu(S);this._={app:S,element:W.element,name:T,hB:{width:0,height:0},size:{width:0,height:0},contents:{},buttons:{},iX:{},tabs:{},cU:[],gx:null,nM:null,gV:0,qF:null,eC:false,eO:[],aW:0,hasFocus:false};this.bO=W.bO;this.bO.dialog.setStyles({position:h.ie6Compat?'absolute':'fixed',top:0,left:0,visibility:'hidden'});a.event.call(this);this.dg=U=a.oW('dialogDefinition',{name:T,dg:U},S).dg;if(U.onLoad)this.on('load',U.onLoad);if(U.onShow)this.on('show',U.onShow);if(U.onHide)this.on('hide',U.onHide);if(U.onOk)this.on('ok',function(eN){if(U.onOk.call(this,eN)===false)eN.data.hide=false;});if(U.onCancel)this.on('cancel',function(eN){if(U.onCancel.call(this,eN)===false)eN.data.hide=false;});var X=this,Y=function(eN){var gB=X._.contents,dX=false;for(var gs in gB)for(var am in gB[gs]){dX=eN.call(this,gB[gs][am]);if(dX)return;}};this.on('ok',function(eN){Y(function(gB){if(gB.validate){var dX=gB.validate(this);if(typeof dX=='string'){S.document.getWindow().$.alert(dX);dX=false;}if(dX===false){if(gB.select)gB.select();else gB.focus();eN.data.hide=false;eN.stop();return true;}}});},this,null,0);this.on('cancel',function(eN){Y(function(gB){if(gB.isChanged()){if(!S.document.getWindow().$.confirm(S.lang.common.confirmCancel))eN.data.hide=false;return true;}});},this,null,0);this.bO.close.on('click',function(eN){if(this.oW('cancel',{hide:true}).hide!==false)this.hide();},this);function Z(eN){var gB=X._.eO,dX=eN?1: -1;if(gB.length<1)return;var gs=(X._.aW+dX+gB.length)%gB.length,am=gs;while(!gB[am].fM()){am=(am+dX+gB.length)%gB.length;if(am==gs)break;}gB[am].focus();if(gB[am].type=='text')gB[am].select();};var aa;function aT(eN){if(X!=a.dialog._.dL)return;var gB=eN.data.db();aa=0;if(gB==9||gB==a.dy+9){var dX=gB==a.dy+9;if(X._.eC){var gs=dX?s.call(X):t.call(X);X.selectPage(gs);X._.tabs[gs][0].focus();}else Z(!dX);aa=1;}else if(gB==a.eJ+121&& !X._.eC){X._.eC=true;X._.tabs[X._.gx][0].focus();aa=1;}else if((gB==37||gB==39)&&X._.eC){gs=gB==37?s.call(X):t.call(X);X.selectPage(gs);X._.tabs[gs][0].focus();aa=1;}if(aa){eN.stop();eN.data.preventDefault();}};function bm(eN){aa&&eN.data.preventDefault();};this.on('show',function(){a.document.on('keydown',aT,this,null,0);if(h.opera||h.gecko&&h.mac)a.document.on('keypress',bm,this);if(h.ie6Compat){var eN=E.getChild(0).getFrameDocument();eN.on('keydown',aT,this,null,0);}});this.on('hide',function(){a.document.removeListener('keydown',aT);if(h.opera||h.gecko&&h.mac)a.document.removeListener('keypress',bm);});this.on('iframeAdded',function(eN){var gB=new l(eN.data.iframe.$.contentWindow.document);gB.on('keydown',aT,this,null,0);});this.on('show',function(){if(!this._.hasFocus){this._.aW= -1;Z(true);}},this,null,4294967295);if(h.ie6Compat)this.on('load',function(eN){var gB=this.getElement(),dX=gB.getFirst();dX.remove();dX.appendTo(gB);},this);B(this);C(this);this.bO.title.setText(U.title);for(var bW=0;bW<U.contents.length;bW++)this.addPage(U.contents[bW]);var eS=/cke_dialog_tab(\s|$|_)/,fv=/cke_dialog_tab(\s|$)/;this.bO.tabs.on('click',function(eN){var gP=this;var gB=eN.data.bK(),dX=gB,gs,am;if(!(eS.test(gB.$.className)||gB.getName()=='a'))return;gs=gB.$.id.substr(0,gB.$.id.lastIndexOf('_'));gP.selectPage(gs);if(gP._.eC){gP._.eC=false;gP._.aW= -1;Z(true);}eN.data.preventDefault();},this);var aP=[],bV=a.dialog._.gv.hbox.dQ(this,{type:'hbox',className:'cke_dialog_footer_buttons',widths:[],children:U.buttons},aP).getChild();this.bO.footer.setHtml(aP.join(''));for(bW=0;bW<bV.length;bW++)this._.buttons[bV[bW].id]=bV[bW];a.skins.load(S,'dialog');};function u(S,T,U){this.element=T;this.cQ=U;this.fM=function(){return!T.getAttribute('disabled')&&T.isVisible();};this.focus=function(){S._.aW=this.cQ;this.element.focus();};T.on('keydown',function(V){if(V.data.db()in{32:1,13:1})this.oW('click');});T.on('focus',function(){this.oW('mouseover');});T.on('blur',function(){this.oW('mouseout');});};a.dialog.prototype={resize:(function(){return function(S,T){var U=this;if(U._.hB&&U._.hB.width==S&&U._.hB.height==T)return;a.dialog.oW('resize',{dialog:U,skin:U._.app.gd,width:S,height:T},U._.app);U._.hB={width:S,height:T};};})(),hR:function(){var S=this._.element.getFirst();return{width:S.$.offsetWidth||0,height:S.$.offsetHeight||0};},mn:function(){var S=this.hR();S.height=S.height-(this.bO.title.$.offsetHeight||0)-(this.bO.footer.$.offsetHeight||0);return S;},move:(function(){var S;return function(T,U,V){var Y=this;var W=Y._.element.getFirst();if(S===undefined)S=W.getComputedStyle('position')=='fixed';if(S&&Y._.position&&Y._.position.x==T&&Y._.position.y==U)return;Y._.position={x:T,y:U};if(!S){var X=a.document.getWindow().hV();T+=X.x;U+=X.y;}W.setStyles({left:(T>0?T:0)+'px',top:(U>0?U:0)+'px'});V&&(Y._.moved=1);};})(),gz:function(){return k.extend({},this._.position);},show:function(){var S=this._.app;if(S.mode=='qt'&&i){var T=S.getSelection();T&&T.up();}var U=this._.element,V=this.dg;if(!(U.getParent()&&U.getParent().equals(a.document.bH())))U.appendTo(a.document.bH());else return;if(h.gecko&&h.version<10900){var W=this.bO.dialog;W.setStyle('position','absolute');setTimeout(function(){W.setStyle('position','fixed');},0);}this.resize(this._.hB&&this._.hB.width||V.minWidth,this._.hB&&this._.hB.height||V.minHeight);this.selectPage(this.dg.contents[0].id);this.reset();if(a.dialog._.gw===null)a.dialog._.gw=this._.app.config.baseFloatZIndex;this._.element.getFirst().setStyle('z-index',a.dialog._.gw+=10);if(a.dialog._.dL===null){a.dialog._.dL=this;this._.ep=null;try{G(this._.app);}catch(Z){E=void(0);G(S);D=false;}U.on('keydown',J);U.on(h.opera?'keypress':'keyup',K);for(var X in{keyup:1,keydown:1,keypress:1})U.on(X,Q);}else{this._.ep=a.dialog._.dL;var Y=this._.ep.getElement().getFirst();Y.$.style.zIndex-=Math.floor(this._.app.config.baseFloatZIndex/2);a.dialog._.dL=this;}L(this,this,'\x1b',null,function(){var aa=this.getButton('cancel');if(aa)aa.click();else if(this.oW('cancel',{hide:true}).hide!==false)this.hide();});this._.hasFocus=false;k.setTimeout(function(){this.layout();this.bO.dialog.setStyle('visibility','');this.cr('load',{});this.oW('show',{});this._.app.oW('dialogShow',this);this.gh(function(aa){aa.jW&&aa.jW();});},100,this);},layout:function(){var U=this;var S=a.document.getWindow().eR(),T=U.hR();U.move(U._.moved?U._.position.x:(S.width-T.width)/2,U._.moved?U._.position.y:(S.height-T.height)/2);},gh:function(S){var V=this;for(var T in V._.contents)for(var U in V._.contents[T])S(V._.contents[T][U]);return V;},reset:(function(){var S=function(T){if(T.reset)T.reset();};return function(){this.gh(S);return this;};})(),rN:function(){var S=arguments;this.gh(function(T){if(T.qi)T.qi.apply(T,S);});},sI:function(){var S=arguments;this.gh(function(T){if(T.rx)T.rx.apply(T,S);});},hide:function(){this.oW('hide',{});this._.app.oW('dialogHide',this);var S=this._.element;if(!S.getParent())return;S.remove();this.bO.dialog.setStyle('visibility','hidden');M(this);if(!this._.ep)H();else{var T=this._.ep.getElement().getFirst();T.setStyle('z-index',parseInt(T.$.style.zIndex,10)+Math.floor(this._.app.config.baseFloatZIndex/2));}a.dialog._.dL=this._.ep;if(!this._.ep){a.dialog._.gw=null;S.removeListener('keydown',J);S.removeListener(h.opera?'keypress':'keyup',K);for(var U in{keyup:1,keydown:1,keypress:1})S.removeListener(U,Q);var V=this._.app;V.focus();V._.activeElement=null;V._.oO=[];if(V.mode=='qt'&&i){var W=V.getSelection();W&&W.sd(true);}}else a.dialog._.gw-=10;this.gh(function(X){X.ki&&X.ki();});},addPage:function(S){var bm=this;var T=[],U=S.label?' title="'+k.htmlEncode(S.label)+'"':'',V=S.elements,W=a.dialog._.gv.vbox.dQ(bm,{type:'vbox',className:'cke_dialog_page_contents',children:S.elements,expand: ! !S.expand,padding:S.padding,style:S.style||'width: 100%; height: 100%;'},T),X=m.kE(T.join(''),a.document),Y=m.kE(['<a class="cke_dialog_tab"',bm._.gV>0?' cke_last':'cke_first',U,! !S.hidden?' style="display:none"':'',' id="',S.id+'_',k.getNextNumber(),'" href="javascript:void(0)"',' hp="true">',S.label,'</a>'].join(''),a.document);if(bm._.gV===0)bm.bO.dialog.addClass('cke_single_page');else bm.bO.dialog.removeClass('cke_single_page');bm._.tabs[S.id]=[Y,X];bm._.cU.push(S.id);bm._.gV++;bm._.qF=Y;var Z=bm._.contents[S.id]={},aa,aT=W.getChild();while(aa=aT.shift()){Z[aa.id]=aa;if(typeof aa.getChild=='function')aT.push.apply(aT,aa.getChild());}X.setAttribute('name',S.id);X.appendTo(bm.bO.contents);Y.unselectable();bm.bO.tabs.append(Y);if(S.accessKey){L(bm,bm,'bP+'+S.accessKey,O,N);bm._.iX['bP+'+S.accessKey]=S.id;}},selectPage:function(S){var X=this;for(var T in X._.tabs){var U=X._.tabs[T][0],V=X._.tabs[T][1];if(T!=S){U.removeClass('cke_dialog_tab_selected');V.hide();}}var W=X._.tabs[S];W[0].addClass('cke_dialog_tab_selected');W[1].show();X._.gx=S;X._.nM=k.indexOf(X._.cU,S);},vJ:function(S){var T=this._.tabs[S]&&this._.tabs[S][0];if(!T)return;T.hide();},showPage:function(S){var T=this._.tabs[S]&&this._.tabs[S][0];if(!T)return;T.show();},getElement:function(){return this._.element;},getName:function(){return this._.name;},getContentElement:function(S,T){return this._.contents[S][T];},getValueOf:function(S,T){return this.getContentElement(S,T).getValue();},setValueOf:function(S,T,U){return this.getContentElement(S,T).setValue(U);},getButton:function(S){return this._.buttons[S];},click:function(S){return this._.buttons[S].click();},disableButton:function(S){return this._.buttons[S].disable();},enableButton:function(S){return this._.buttons[S].enable();},vj:function(){return this._.gV;},getParentApi:function(){return this._.app.cg;},eY:function(){return this._.app;},rf:function(){return this.eY().getSelection().rf();},tQ:function(S,T){var V=this;if(typeof T=='undefined'){T=V._.eO.length;V._.eO.push(new u(V,S,T));}else{V._.eO.splice(T,0,new u(V,S,T));for(var U=T+1;U<V._.eO.length;U++)V._.eO[U].cQ++;}},setTitle:function(S){this.bO.title.setText(S);}};k.extend(a.dialog,{add:function(S,T){if(!this._.ev[S]||typeof T=='function')this._.ev[S]=T;},exists:function(S){return! !this._.ev[S];},getCurrent:function(){return a.dialog._.dL;},okButton:(function(){var S=function(T,U){U=U||{};return k.extend({id:'ok',type:'button',label:T.lang.common.ok,'class':'cke_dialog_ui_button_ok',onClick:function(V){var W=V.data.dialog;if(W.oW('ok',{hide:true}).hide!==false)W.hide();}},U,true);};S.type='button';S.override=function(T){return k.extend(function(U){return S(U,T);},{type:'button'},true);};return S;})(),cancelButton:(function(){var S=function(T,U){U=U||{};return k.extend({id:'cancel',type:'button',label:T.lang.common.cancel,'class':'cke_dialog_ui_button_cancel',onClick:function(V){var W=V.data.dialog;if(W.oW('cancel',{hide:true}).hide!==false)W.hide();}},U,true);};S.type='button';S.override=function(T){return k.extend(function(U){return S(U,T);},{type:'button'},true);};return S;})(),addUIElement:function(S,T){this._.gv[S]=T;}});a.dialog._={gv:{},ev:{},dL:null,gw:null};a.event.du(a.dialog);a.event.du(a.dialog.prototype,true);var v={resizable:a.DIALOG_RESIZE_NONE,minWidth:600,minHeight:400,buttons:[a.dialog.okButton,a.dialog.cancelButton]},w=function(S,T,U){for(var V=0,W;W=S[V];V++){if(W.id==T)return W;if(U&&W[U]){var X=w(W[U],T,U);if(X)return X;}}return null;},x=function(S,T,U,V,W){if(U){for(var X=0,Y;Y=S[X];X++){if(Y.id==U){S.splice(X,0,T);return T;}if(V&&Y[V]){var Z=x(Y[V],T,U,V,true);if(Z)return Z;}}if(W)return null;}S.push(T);return T;},y=function(S,T,U){for(var V=0,W;W=S[V];V++){if(W.id==T)return S.splice(V,1);if(U&&W[U]){var X=y(W[U],T,U);if(X)return X;}}return null;},z=function(S,T){this.dialog=S;var U=T.contents;for(var V=0,W;W=U[V];V++)U[V]=new A(S,W);k.extend(this,T);};z.prototype={vz:function(S){return w(this.contents,S);},getButton:function(S){return w(this.buttons,S);},uh:function(S,T){return x(this.contents,S,T);},qW:function(S,T){return x(this.buttons,S,T);},uP:function(S){y(this.contents,S);},uO:function(S){y(this.buttons,S);}};function A(S,T){this._={dialog:S};k.extend(this,T);};A.prototype={eB:function(S){return w(this.elements,S,'children');},add:function(S,T){return x(this.elements,S,T,'children');},remove:function(S){y(this.elements,S,'children');}};function B(S){var T=null,U=null,V=S.getElement().getFirst(),W=S.eY(),X=W.config.dialog_magnetDistance,Y=W.skin.margins||[0,0,0,0];if(typeof X=='undefined')X=20;function Z(aT){var bm=S.hR(),bW=a.document.getWindow().eR(),eS=aT.data.$.screenX,fv=aT.data.$.screenY,aP=eS-T.x,bV=fv-T.y,eN,gB;T={x:eS,y:fv};U.x+=aP;U.y+=bV;if(U.x+Y[3]<X)eN= -Y[3];else if(U.x-Y[1]>bW.width-bm.width-X)eN=bW.width-bm.width+Y[1];else eN=U.x;if(U.y+Y[0]<X)gB= -Y[0];else if(U.y-Y[2]>bW.height-bm.height-X)gB=bW.height-bm.height+Y[2];else gB=U.y;S.move(eN,gB,1);aT.data.preventDefault();};function aa(aT){a.document.removeListener('mousemove',Z);a.document.removeListener('mouseup',aa);if(h.ie6Compat){var bm=E.getChild(0).getFrameDocument();bm.removeListener('mousemove',Z);bm.removeListener('mouseup',aa);}};S.bO.title.on('mousedown',function(aT){T={x:aT.data.$.screenX,y:aT.data.$.screenY};a.document.on('mousemove',Z);a.document.on('mouseup',aa);U=S.gz();if(h.ie6Compat){var bm=E.getChild(0).getFrameDocument();bm.on('mousemove',Z);bm.on('mouseup',aa);}aT.data.preventDefault();},S);};function C(S){var T=S.dg,U=T.resizable;if(U==a.DIALOG_RESIZE_NONE)return;var V=S.eY(),W,X,Y,Z,aa,aT;function bm(aP){if(S._.moved&&V.lang.dir=='rtl'){var bV=S._.element.getFirst();bV.setStyle('right',aP+'px');bV.removeStyle('left');}else if(!S._.moved)S.layout();};function bW(aP){aa=S.hR();aP=aP.data.$;var bV=S.bO.contents,eN=bV.$.getElementsByTagName('iframe').length;if(eN){aT=m.kE('<div class="cke_dialog_resize_cover" style="height: 100%; position: absolute; width: 100%;"></div>');bV.append(aT);}X=aa.height-S.bO.contents.hR('height',!(h.gecko||h.opera||i&&h.quirks));W=aa.width-S.bO.contents.hR('width',1);Z={x:aP.screenX,y:aP.screenY};Y=a.document.getWindow().eR();a.document.on('mousemove',eS);a.document.on('mouseup',fv);if(h.ie6Compat){var gB=E.getChild(0).getFrameDocument();gB.on('mousemove',eS);gB.on('mouseup',fv);}aP.preventDefault&&aP.preventDefault();};S.on('load',function(){var aP='';if(U==a.DIALOG_RESIZE_WIDTH)aP=' cke_resizer_horizontal';else if(U==a.DIALOG_RESIZE_HEIGHT)aP=' cke_resizer_vertical';var bV=m.kE('<div class="cke_resizer'+aP+'"'+' title="'+k.htmlEncode(V.lang.resize)+'"></div>');bV.on('mousedown',bW);S.bO.footer.append(bV,1);});V.on('destroy',function(){k.removeFunction(bW);});function eS(aP){var bV=V.lang.dir=='rtl',eN=(aP.data.$.screenX-Z.x)*(bV? -1:1),gB=aP.data.$.screenY-Z.y,dX=aa.width,gs=aa.height,am=dX+eN*(S._.moved?1:2),gP=gs+gB*(S._.moved?1:2),gR=S._.element.getFirst(),pw=bV&&gR.getComputedStyle('right'),aq=S.gz();if(pw)pw=pw=='auto'?Y.width-(aq.x||0)-gR.hR('width'):parseInt(pw,10);if(aq.y+gP>Y.height)gP=Y.height-aq.y;if((bV?pw:aq.x)+am>Y.width)am=Y.width-(bV?pw:aq.x);if((U==a.DIALOG_RESIZE_WIDTH||U==a.DIALOG_RESIZE_BOTH)&& !(bV&&eN>0&& !aq.x))dX=Math.max(T.minWidth||0,am-W);if(U==a.DIALOG_RESIZE_HEIGHT||U==a.DIALOG_RESIZE_BOTH)gs=Math.max(T.minHeight||0,gP-X);S.resize(dX,gs);bm(pw);aP.data.preventDefault();};function fv(){a.document.removeListener('mouseup',fv);a.document.removeListener('mousemove',eS);if(aT){aT.remove();aT=null;}if(h.ie6Compat){var aP=E.getChild(0).getFrameDocument();aP.removeListener('mouseup',fv);aP.removeListener('mousemove',eS);}if(V.lang.dir=='rtl'){var bV=S._.element.getFirst(),eN=bV.getComputedStyle('left');if(eN=='auto')eN=Y.width-parseInt(bV.rd('right'),10)-S.hR().width;else eN=parseInt(eN,10);bV.removeStyle('right');S._.position.x+=1;S.move(eN,S._.position.y);}};};var D=true,E,F,G=function(S){var T=a.document.getWindow();if(!D|| !E){var U=S.config.dialog_backgroundCoverColor||'white',V=['<div style="position: ',h.ie6Compat?'absolute':'fixed','; z-index: ',S.config.baseFloatZIndex,'; top: 0px; left: 0px; ',!h.ie6Compat?'background-color: '+U:'','" id="cke_dialog_background_cover">'];if(h.ie6Compat){var W=h.isCustomDomain(),X="<html><body style=\\'background-color:"+U+";\\'></body></html>";V.push('<iframe hp="true" frameborder="0" id="cke_dialog_background_iframe" src="javascript:');V.push('void((function(){document.open();'+(W?"document.domain='"+document.domain+"';":'')+"document.write( '"+X+"' );"+'document.close();'+'})())');V.push('" style="position:absolute;left:0;top:0;width:100%;height: 100%;progid:DXImageTransform.Microsoft.Alpha(opacity=0)"></iframe>');}V.push('</div>');E=m.kE(V.join(''),a.document);}var Y=E,Z=function(){var bW=T.eR();Y.setStyles({width:bW.width+'px',height:bW.height+'px'});},aa=function(){var bW=T.hV(),eS=a.dialog._.dL;Y.setStyles({left:bW.x+'px',top:bW.y+'px'});do{var fv=eS.gz();eS.move(fv.x,fv.y);}while(eS=eS._.ep);};F=Z;T.on('resize',Z);Z();if(h.ie6Compat){var aT=function(){aa();arguments.callee.lw.apply(this,arguments);};T.$.setTimeout(function(){aT.lw=window.onscroll||(function(){});window.onscroll=aT;},0);aa();}var bm=S.config.dialog_backgroundCoverOpacity;Y.setOpacity(typeof bm!='undefined'?bm:0.5);Y.appendTo(a.document.bH());},H=function(){if(!E)return;var S=a.document.getWindow();E.remove();S.removeListener('resize',F);if(h.ie6Compat)S.$.setTimeout(function(){var T=window.onscroll&&window.onscroll.lw;window.onscroll=T||null;},0);F=null;},I={},J=function(S){var T=S.data.$.ctrlKey||S.data.$.metaKey,U=S.data.$.altKey,V=S.data.$.shiftKey,W=String.fromCharCode(S.data.$.keyCode),X=I[(T?'bP+':'')+(U?'eJ+':'')+(V?'dy+':'')+W];if(!X|| !X.length)return;X=X[X.length-1];X.keydown&&X.keydown.call(X.bf,X.dialog,X.iK);S.data.preventDefault();},K=function(S){var T=S.data.$.ctrlKey||S.data.$.metaKey,U=S.data.$.altKey,V=S.data.$.shiftKey,W=String.fromCharCode(S.data.$.keyCode),X=I[(T?'bP+':'')+(U?'eJ+':'')+(V?'dy+':'')+W];if(!X|| !X.length)return;X=X[X.length-1];if(X.keyup){X.keyup.call(X.bf,X.dialog,X.iK);S.data.preventDefault();}},L=function(S,T,U,V,W){var X=I[U]||(I[U]=[]);X.push({bf:S,dialog:T,iK:U,keyup:W||S.eZ,keydown:V||S.iU});},M=function(S){for(var T in I){var U=I[T];for(var V=U.length-1;V>=0;V--){if(U[V].dialog==S||U[V].bf==S)U.splice(V,1);}if(U.length===0)delete I[T];}},N=function(S,T){if(S._.iX[T])S.selectPage(S._.iX[T]);},O=function(S,T){},P={27:1,13:1},Q=function(S){if(S.data.db()in P)S.data.stopPropagation();};(function(){p.dialog={bf:function(S,T,U,V,W,X,Y){if(arguments.length<4)return;var Z=(V.call?V(T):V)||'div',aa=['<',Z,' '],aT=(W&&W.call?W(T):W)||{},bm=(X&&X.call?X(T):X)||{},bW=(Y&&Y.call?Y(S,T):Y)||'',eS=this.oJ=bm.id||k.getNextNumber()+'_uiElement',fv=this.id=T.id,aP;bm.id=eS;var bV={};if(T.type)bV['cke_dialog_ui_'+T.type]=1;if(T.className)bV[T.className]=1;var eN=bm['class']&&bm['class'].split?bm['class'].split(' '):[];for(aP=0;aP<eN.length;aP++){if(eN[aP])bV[eN[aP]]=1;}var gB=[];for(aP in bV)gB.push(aP);bm['class']=gB.join(' ');if(T.title)bm.title=T.title;var dX=(T.style||'').split(';');for(aP in aT)dX.push(aP+':'+aT[aP]);if(T.hidden)dX.push('display:none');for(aP=dX.length-1;aP>=0;aP--){if(dX[aP]==='')dX.splice(aP,1);}if(dX.length>0)bm.style=(bm.style?bm.style+'; ':'')+dX.join('; ');for(aP in bm)aa.push(aP+'="'+k.htmlEncode(bm[aP])+'" ');aa.push('>',bW,'</',Z,'>');U.push(aa.join(''));(this._||(this._={})).dialog=S;if(typeof T.isChanged=='boolean')this.isChanged=function(){return T.isChanged;};if(typeof T.isChanged=='function')this.isChanged=T.isChanged;a.event.du(this);this.nc(T);if(this.eZ&&this.iU&&T.accessKey)L(this,S,'bP+'+T.accessKey);var gs=this;S.on('load',function(){if(gs.getInputElement())gs.getInputElement().on('focus',function(){S._.eC=false;S._.hasFocus=true;gs.oW('focus');},gs);});if(this.eA){this.cQ=S._.eO.push(this)-1;this.on('focus',function(){S._.aW=gs.cQ;});}k.extend(this,T);},hbox:function(S,T,U,V,W){if(arguments.length<4)return;this._||(this._={});var X=this._.children=T,Y=W&&W.widths||null,Z=W&&W.height||null,aa={},aT,bm=function(){var bW=['<tbody><tr class="cke_dialog_ui_hbox">'];for(aT=0;aT<U.length;aT++){var eS='cke_dialog_ui_hbox_child',fv=[];if(aT===0)eS='cke_dialog_ui_hbox_first';if(aT==U.length-1)eS='cke_dialog_ui_hbox_last';bW.push('<td class="',eS,'" ');if(Y){if(Y[aT])fv.push('width:'+k.cssLength(Y[aT]));}else fv.push('width:'+Math.floor(100/U.length)+'%');if(Z)fv.push('height:'+k.cssLength(Z));if(W&&W.padding!=undefined)fv.push('padding:'+k.cssLength(W.padding));if(fv.length>0)bW.push('style="'+fv.join('; ')+'" ');bW.push('>',U[aT],'</td>');}bW.push('</tr></tbody>');return bW.join('');};p.dialog.bf.call(this,S,W||{type:'hbox'},V,'table',aa,W&&W.align&&{align:W.align}||null,bm);},vbox:function(S,T,U,V,W){if(arguments.length<3)return;this._||(this._={});var X=this._.children=T,Y=W&&W.width||null,Z=W&&W.vY||null,aa=function(){var aT=['<table cellspacing="0" border="0" '];aT.push('style="');if(W&&W.expand)aT.push('height:100%;');aT.push('width:'+k.cssLength(Y||'100%'),';');aT.push('"');aT.push('align="',k.htmlEncode(W&&W.align||(S.eY().lang.dir=='ltr'?'left':'right')),'" ');aT.push('><tbody>');for(var bm=0;bm<U.length;bm++){var bW=[];aT.push('<tr><td ');if(Y)bW.push('width:'+k.cssLength(Y||'100%'));if(Z)bW.push('height:'+k.cssLength(Z[bm]));else if(W&&W.expand)bW.push('height:'+Math.floor(100/U.length)+'%');if(W&&W.padding!=undefined)bW.push('padding:'+k.cssLength(W.padding));if(bW.length>0)aT.push('style="',bW.join('; '),'" ');aT.push(' class="cke_dialog_ui_vbox_child">',U[bm],'</td></tr>');}aT.push('</tbody></table>');return aT.join('');};p.dialog.bf.call(this,S,W||{type:'vbox'},V,'div',null,null,aa);}};})();p.dialog.bf.prototype={getElement:function(){return a.document.getById(this.oJ);},getInputElement:function(){return this.getElement();},getDialog:function(){return this._.dialog;},setValue:function(S){this.getInputElement().setValue(S);this.oW('change',{value:S});return this;},getValue:function(){return this.getInputElement().getValue();},isChanged:function(){return false;},selectParentTab:function(){var V=this;var S=V.getInputElement(),T=S,U;while((T=T.getParent())&&T.$.className.search('cke_dialog_page_contents')== -1){}if(!T)return V;U=T.getAttribute('name');if(V._.dialog._.gx!=U)V._.dialog.selectPage(U);return V;},focus:function(){this.selectParentTab().getInputElement().focus();return this;},nc:function(S){var T=/^on([A-Z]\w+)/,U,V=function(X,Y,Z,aa){Y.on('load',function(){X.getInputElement().on(Z,aa,X);});};for(var W in S){if(!(U=W.match(T)))continue;if(this.dm[W])this.dm[W].call(this,this._.dialog,S[W]);else V(this,this._.dialog,U[1].toLowerCase(),S[W]);}return this;},dm:{onLoad:function(S,T){S.on('load',T,this);},onShow:function(S,T){S.on('show',T,this);},onHide:function(S,T){S.on('hide',T,this);}},iU:function(S,T){this.focus();},eZ:function(S,T){},disable:function(){var S=this.getInputElement();S.setAttribute('disabled','true');S.addClass('cke_disabled');},enable:function(){var S=this.getInputElement();S.removeAttribute('disabled');S.removeClass('cke_disabled');},isEnabled:function(){return!this.getInputElement().getAttribute('disabled');},isVisible:function(){return this.getInputElement().isVisible();},fM:function(){if(!this.isEnabled()|| !this.isVisible())return false;return true;}};p.dialog.hbox.prototype=k.extend(new p.dialog.bf(),{getChild:function(S){var T=this;if(arguments.length<1)return T._.children.concat();if(!S.splice)S=[S];if(S.length<2)return T._.children[S[0]];else return T._.children[S[0]]&&T._.children[S[0]].getChild?T._.children[S[0]].getChild(S.slice(1,S.length)):null;}},true);p.dialog.vbox.prototype=new p.dialog.hbox();(function(){var S={dQ:function(T,U,V){var W=U.children,X,Y=[],Z=[];for(var aa=0;aa<W.length&&(X=W[aa]);aa++){var aT=[];Y.push(aT);Z.push(a.dialog._.gv[X.type].dQ(T,X,aT));}return new p.dialog[U.type](T,Z,Y,V,U);}};a.dialog.addUIElement('hbox',S);a.dialog.addUIElement('vbox',S);})();a.rB=function(S){this.ry=S;};a.rB.prototype={exec:function(S){S.openDialog(this.ry);},sG:false};(function(){var S=/^([a]|[^a])+$/,T=/^\d*$/,U=/^\d*(?:\.\d+)?$/;a.sg=1;a.jb=2;a.dialog.validate={functions:function(){return function(){var aT=this;var V=aT&&aT.getValue?aT.getValue():arguments[0],W=undefined,X=a.jb,Y=[],Z;for(Z=0;Z<arguments.length;Z++){if(typeof arguments[Z]=='function')Y.push(arguments[Z]);else break;}if(Z<arguments.length&&typeof arguments[Z]=='string'){W=arguments[Z];Z++;}if(Z<arguments.length&&typeof arguments[Z]=='number')X=arguments[Z];var aa=X==a.jb?true:false;for(Z=0;Z<Y.length;Z++){if(X==a.jb)aa=aa&&Y[Z](V);else aa=aa||Y[Z](V);}if(!aa){if(W!==undefined)alert(W);if(aT&&(aT.select||aT.focus))aT.select||aT.focus();return false;}return true;};},regex:function(V,W){return function(){var Y=this;var X=Y&&Y.getValue?Y.getValue():arguments[0];if(!V.test(X)){if(W!==undefined)alert(W);if(Y&&(Y.select||Y.focus))if(Y.select)Y.select();else Y.focus();return false;}return true;};},notEmpty:function(V){return this.regex(S,V);},integer:function(V){return this.regex(T,V);},number:function(V){return this.regex(U,V);},equals:function(V,W){return this.functions(function(X){return X==V;},W);},notEqual:function(V,W){return this.functions(function(X){return X!=V;},W);}};})();function R(S,T){var U=function(){W(this);T(this);},V=function(){W(this);},W=function(X){X.removeListener('ok',U);X.removeListener('cancel',V);};S.on('ok',U);S.on('cancel',V);};k.extend(a.application.prototype,{openDialog:function(S,T,U){var V=a.dialog._.ev[S];if(typeof V=='function'){var W=this._.oB||(this._.oB={}),X=W[S]||(W[S]=new a.dialog(this,S));T&&T.call(X,X);!this._.activeElement&&(this._.activeElement=this.document.$.activeElement);!this._.oO&&(this._.oO=this.ld['filesview.filesview'].tools.oO());X.show();return X;}else if(V=='failed')throw new Error('[CKFINDER.dialog.openDialog] Dialog "'+S+'" failed when loading dg.');var Y=a.document.bH(),Z=Y.$.style.cursor,aa=this;Y.setStyle('cursor','wait');a.scriptLoader.load(a.getUrl(V),function(){if(typeof a.dialog._.ev[S]!='function')a.dialog._.ev[S]='failed';aa.openDialog(S,T);Y.setStyle('cursor',Z);},null,null,U);return null;},hs:function(S,T,U,V){var W=this;setTimeout(function(){W.cg.openDialog('Input',function(X){X.show();X.setTitle(S||W.lang.common.inputTitle);X.getContentElement('tab1','msg').getElement().setHtml(T);X.getContentElement('tab1','input').setValue(U);R(X,function(Y){var Z=Y.getContentElement('tab1','input').getValue();V(Z);});});},0);},msgDialog:function(S,T,U){var V=this;setTimeout(function(){V.cg.openDialog('Msg',function(W){W.show();W.setTitle(S||V.lang.common.messageTitle);W.getContentElement('tab1','msg').getElement().setHtml(T);U&&R(W,function(X){U();});});},0);},fe:function(S,T,U){var V=this;setTimeout(function(){V.cg.openDialog('Confirm',function(W){W.show();W.setTitle(S||V.lang.common.confirmationTitle);W.getContentElement('tab1','msg').getElement().setHtml(T);R(W,function(X){U();});});},0);},skippedFilesDialog:function(S,T,U,V){var W=this;setTimeout(function(){W.cg.openDialog('SkippedFiles',function(X){X.show();X.setTitle(S||W.lang.common.messageTitle);if(U){X.getContentElement('tab1','msg').getElement().show();X.getContentElement('tab1','msg').getElement().setHtml(U);}else X.getContentElement('tab1','msg').getElement().hide();var Y='',Z='cke_files_list',aa='',aT=T.length;if(aT>3){Z+=' cke_files_list_many';aa=' style="height: '+Math.min(aT+0.1,20)+'em"';}for(var bm=0;bm<aT;bm++)Y+='<li>'+(typeof T[bm]=='string'?T[bm]:T[bm].getAttribute('name'))+'</li>';X.getContentElement('tab1','skippedList').getElement().setHtml('<ul class="'+Z+'"'+aa+'>'+Y+'</ul>');V&&R(X,function(){V();});});},0);}});o.add('dialog',{bM:['dialogui'],onLoad:function(){a.dialog.add('Confirm',function(S){return{title:S.lang.common.confirmationTitle,minWidth:270,minHeight:60,contents:[{id:'tab1',elements:[{type:'html',html:'',id:'msg'}]}],buttons:[CKFinder.dialog.okButton,CKFinder.dialog.cancelButton]};});a.dialog.add('Msg',function(S){return{title:S.lang.common.messageTitle,minWidth:270,minHeight:60,contents:[{id:'tab1',elements:[{type:'html',html:'',id:'msg'}]}],buttons:[CKFinder.dialog.okButton]};});a.dialog.add('Input',function(S){return{title:S.lang.common.inputTitle,minWidth:270,minHeight:60,contents:[{id:'tab1',elements:[{type:'html',html:'',id:'msg'},{type:'text',id:'input'}]}],buttons:[CKFinder.dialog.okButton,CKFinder.dialog.cancelButton]};});a.dialog.add('SkippedFiles',function(S){return{title:S.lang.common.messageTitle,minWidth:400,minHeight:100,contents:[{id:'tab1',style:h.ie7Compat?'height: auto':'',expand:true,padding:0,elements:[{type:'vbox',expand:true,children:[{type:'html',className:'cke_dialog_msg',html:'',id:'msg'},{type:'html',id:'skippedDescription',className:'cke_dialog_msg',html:S.lang.SkippedFiles},{type:'html',id:'skippedList',className:'cke_dialog_msg',html:''}]}]}],buttons:[CKFinder.dialog.okButton]};});}});})();o.add('dialogui');(function(){var r=function(y){var B=this;B._||(B._={});B._['default']=B._.hq=y['default']||'';var z=[B._];for(var A=1;A<arguments.length;A++)z.push(arguments[A]);z.push(true);k.extend.apply(k,z);return B._;},s={dQ:function(y,z,A){return new p.dialog.ju(y,z,A);}},t={dQ:function(y,z,A){return new p.dialog[z.type](y,z,A);}},u={isChanged:function(){return this.getValue()!=this.lu();},reset:function(){this.setValue(this.lu());},jW:function(){this._.hq=this.getValue();},ki:function(){this._.hq=this._['default'];},lu:function(){return this._.hq;}},v=k.extend({},p.dialog.bf.prototype.dm,{onChange:function(y,z){if(!this._.pL){y.on('load',function(){this.getInputElement().on('change',function(){this.oW('change',{value:this.getValue()});},this);},this);this._.pL=true;}this.on('change',z);}},true),w=/^on([A-Z]\w+)/,x=function(y){for(var z in y){if(w.test(z)||z=='title'||z=='type')delete y[z];}return y;};k.extend(p.dialog,{dD:function(y,z,A,B){if(arguments.length<4)return;var C=r.call(this,z);C.hz=k.getNextNumber()+'_label';var D=this._.children=[],E=function(){var F=[];if(z.uC!='horizontal')F.push('<div class="cke_dialog_ui_labeled_label" id="',C.hz,'" >',z.label,'</div>','<div class="cke_dialog_ui_labeled_content">',B(y,z),'</div>');else{var G={type:'hbox',widths:z.widths,padding:0,children:[{type:'html',html:'<span class="cke_dialog_ui_labeled_label" id="'+C.hz+'">'+k.htmlEncode(z.label)+'</span>'},{type:'html',html:'<span class="cke_dialog_ui_labeled_content">'+B(y,z)+'</span>'}]};a.dialog._.gv.hbox.dQ(y,G,F);}return F.join('');};p.dialog.bf.call(this,y,z,A,'div',null,null,E);},ju:function(y,z,A){if(arguments.length<3)return;r.call(this,z);var B=this._.le=k.getNextNumber()+'_textInput',C={'class':'cke_dialog_ui_input_'+z.type,id:B,type:'text'},D;if(z.validate)this.validate=z.validate;if(z.maxLength)C.uy=z.maxLength;if(z.size)C.size=z.size;var E=this,F=false;y.on('load',function(){E.getInputElement().on('keydown',function(H){if(H.data.db()==13)F=true;});E.getInputElement().on('keyup',function(H){if(H.data.db()==13&&F){y.getButton('ok')&&setTimeout(function(){y.getButton('ok').click();},0);F=false;}},null,null,1000);});var G=function(){var H=['<div class="cke_dialog_ui_input_',z.type,'"'];if(z.width)H.push('style="width:'+z.width+'" ');H.push('><input ');for(var I in C)H.push(I+'="'+C[I]+'" ');H.push(' /></div>');return H.join('');};p.dialog.dD.call(this,y,z,A,G);},textarea:function(y,z,A){if(arguments.length<3)return;r.call(this,z);var B=this,C=this._.le=k.getNextNumber()+'_textarea',D={};if(z.validate)this.validate=z.validate;D.rows=z.rows||5;D.cols=z.cols||20;var E=function(){var F=['<div class="cke_dialog_ui_input_textarea"><textarea class="cke_dialog_ui_input_textarea" id="',C,'" '];for(var G in D)F.push(G+'="'+k.htmlEncode(D[G])+'" ');F.push('>',k.htmlEncode(B._['default']),'</textarea></div>');return F.join('');};p.dialog.dD.call(this,y,z,A,E);},checkbox:function(y,z,A){if(arguments.length<3)return;var B=r.call(this,z,{'default': ! !z['default']});if(z.validate)this.validate=z.validate;var C=function(){var D=k.extend({},z,{id:z.id?z.id+'_checkbox':k.getNextNumber()+'_checkbox'},true),E=[],F={'class':'cke_dialog_ui_checkbox_input',type:'checkbox'};x(D);if(z['default'])F.checked='checked';B.checkbox=new p.dialog.bf(y,D,E,'input',null,F);E.push(' <label for="',F.id,'">',k.htmlEncode(z.label),'</label>');return E.join('');};p.dialog.bf.call(this,y,z,A,'span',null,null,C);},radio:function(y,z,A){if(arguments.length<3)return;r.call(this,z);if(!this._['default'])this._['default']=this._.hq=z.items[0][1];if(z.validate)this.validate=z.sh;var B=[],C=this,D=function(){var E=[],F=[],G={'class':'cke_dialog_ui_radio_item'},H=z.id?z.id+'_radio':k.getNextNumber()+'_radio';for(var I=0;I<z.items.length;I++){var J=z.items[I],K=J[2]!==undefined?J[2]:J[0],L=J[1]!==undefined?J[1]:J[0],M=k.extend({},z,{id:k.getNextNumber()+'_radio_input',title:null,type:null},true),N=k.extend({},M,{id:null,title:K},true),O={type:'radio','class':'cke_dialog_ui_radio_input',name:H,value:L},P=[];if(C._['default']==L)O.checked='checked';x(M);x(N);B.push(new p.dialog.bf(y,M,P,'input',null,O));P.push(' ');new p.dialog.bf(y,N,P,'label',null,{'for':O.id},J[0]);E.push(P.join(''));}new p.dialog.hbox(y,[],E,F);return F.join('');};p.dialog.dD.call(this,y,z,A,D);this._.children=B;},button:function(y,z,A){if(!arguments.length)return;if(typeof z=='function')z=z(y.eY());r.call(this,z,{disabled:z.disabled||false});a.event.du(this);var B=this;y.on('load',function(D){var E=this.getElement();(function(){E.on('click',function(F){B.oW('click',{dialog:B.getDialog()});F.data.preventDefault();});})();E.unselectable();},this);var C=k.extend({},z);delete C.style;p.dialog.bf.call(this,y,C,A,'a',null,{style:z.style,href:'javascript:void(0)',title:z.label,hp:'true','class':z['class']},'<span class="cke_dialog_ui_button">'+k.htmlEncode(z.label)+'</span>');},select:function(y,z,A){if(arguments.length<3)return;var B=r.call(this,z);if(z.validate)this.validate=z.validate;var C=function(){var D=k.extend({},z,{id:z.id?z.id+'_select':k.getNextNumber()+'_select'},true),E=[],F=[],G={'class':'cke_dialog_ui_input_select'};if(z.size!=undefined)G.size=z.size;if(z.multiple!=undefined)G.multiple=z.multiple;x(D);for(var H=0,I;H<z.items.length&&(I=z.items[H]);H++)F.push('<option value="',k.htmlEncode(I[1]!==undefined?I[1]:I[0]),'" /> ',k.htmlEncode(I[0]));B.select=new p.dialog.bf(y,D,E,'select',null,G,F.join(''));return E.join('');};p.dialog.dD.call(this,y,z,A,C);},file:function(y,z,A){if(arguments.length<3)return;if(z['default']===undefined)z['default']='';var B=k.extend(r.call(this,z),{dg:z,buttons:[]});if(z.validate)this.validate=z.validate;var C=function(){B.gL=k.getNextNumber()+'_fileInput';var D=h.isCustomDomain(),E=['<iframe frameborder="0" allowtransparency="0" class="cke_dialog_ui_input_file" id="',B.gL,'" title="',z.label,'" src="javascript:void('];E.push(D?"(function(){document.open();document.domain='"+document.domain+"';"+'document.close();'+'})()':'0');E.push(')"></iframe>');return E.join('');};y.on('load',function(){var D=a.document.getById(B.gL),E=D.getParent();E.addClass('cke_dialog_ui_input_file');});p.dialog.dD.call(this,y,z,A,C);},fileButton:function(y,z,A){if(arguments.length<3)return;var B=r.call(this,z),C=this;if(z.validate)this.validate=z.validate;var D=k.extend({},z),E=D.onClick;D.className=(D.className?D.className+' ':'')+'cke_dialog_ui_button';D.onClick=function(F){var G=z['for'];if(!E||E.call(this,F)!==false){y.getContentElement(G[0],G[1]).submit();this.disable();}};y.on('load',function(){y.getContentElement(z['for'][0],z['for'][1])._.buttons.push(C);});p.dialog.button.call(this,y,D,A);},html:(function(){var y=/^\s*<[\w:]+\s+([^>]*)?>/,z=/^(\s*<[\w:]+(?:\s+[^>]*)?)((?:.|\r|\n)+)$/,A=/\/$/;return function(B,C,D){if(arguments.length<3)return;var E=[],F,G=C.html,H,I;if(G.charAt(0)!='<')G='<span>'+G+'</span>';if(C.focus){var J=this.focus;this.focus=function(){J.call(this);C.focus.call(this);this.oW('focus');};if(C.fM){var K=this.fM;this.fM=K;}this.eA=true;}p.dialog.bf.call(this,B,C,E,'span',null,null,'');F=E.join('');H=F.match(y);I=G.match(z)||['','',''];if(A.test(I[1])){I[1]=I[1].slice(0,-1);I[2]='/'+I[2];}D.push([I[1],' ',H[1]||'',I[2]].join(''));};})()},true);p.dialog.html.prototype=new p.dialog.bf();p.dialog.dD.prototype=k.extend(new p.dialog.bf(),{rW:function(y){var z=a.document.getById(this._.hz);if(z.iu()<1)new j.text(y,a.document).appendTo(z);else z.getChild(0).$.nodeValue=y;return this;},vt:function(){var y=a.document.getById(this._.hz);if(!y||y.iu()<1)return '';else return y.getChild(0).getText();},dm:v},true);p.dialog.button.prototype=k.extend(new p.dialog.bf(),{click:function(){var y=this;if(!y._.disabled)return y.oW('click',{dialog:y._.dialog});y.getElement().$.blur();return false;},enable:function(){this._.disabled=false;var y=this.getElement();y&&y.removeClass('disabled');},disable:function(){this._.disabled=true;this.getElement().addClass('disabled');},isVisible:function(){return this.getElement().getFirst().isVisible();},isEnabled:function(){return!this._.disabled;},dm:k.extend({},p.dialog.bf.prototype.dm,{onClick:function(y,z){this.on('click',z);}},true),eZ:function(){this.click();},iU:function(){this.focus();},eA:true},true);p.dialog.ju.prototype=k.extend(new p.dialog.dD(),{getInputElement:function(){return a.document.getById(this._.le);},focus:function(){var y=this.selectParentTab();setTimeout(function(){var z=y.getInputElement();z&&z.$.focus();},0);},select:function(){var y=this.selectParentTab();setTimeout(function(){var z=y.getInputElement();if(z){z.$.focus();z.$.select();}},0);},eZ:function(){this.select();},setValue:function(y){y=y!==null?y:'';return p.dialog.bf.prototype.setValue.call(this,y);},eA:true},u,true);p.dialog.textarea.prototype=new p.dialog.ju();p.dialog.select.prototype=k.extend(new p.dialog.dD(),{getInputElement:function(){return this._.select.getElement();},add:function(y,z,A){var B=new m('option',this.getDialog().eY().document),C=this.getInputElement().$;B.$.text=y;B.$.value=z===undefined||z===null?y:z;if(A===undefined||A===null){if(i)C.add(B.$);else C.add(B.$,null);}else C.add(B.$,A);return this;},remove:function(y){var z=this.getInputElement().$;z.remove(y);return this;},clear:function(){var y=this.getInputElement().$;while(y.length>0)y.remove(0);return this;},eA:true},u,true);p.dialog.checkbox.prototype=k.extend(new p.dialog.bf(),{getInputElement:function(){return this._.checkbox.getElement();},setValue:function(y){this.getInputElement().$.checked=y;this.oW('change',{value:y});},getValue:function(){return this.getInputElement().$.checked;},eZ:function(){this.setValue(!this.getValue());},dm:{onChange:function(y,z){if(!i)return v.onChange.apply(this,arguments);else{y.on('load',function(){var A=this._.checkbox.getElement();A.on('propertychange',function(B){B=B.data.$;if(B.propertyName=='checked')this.oW('change',{value:A.$.checked});},this);},this);this.on('change',z);}return null;}},eA:true},u,true);p.dialog.radio.prototype=k.extend(new p.dialog.bf(),{setValue:function(y){var z=this._.children,A;for(var B=0;B<z.length&&(A=z[B]);B++)A.getElement().$.checked=A.getValue()==y;this.oW('change',{value:y});},getValue:function(){var y=this._.children;for(var z=0;z<y.length;z++){if(y[z].getElement().$.checked)return y[z].getValue();}return null;},eZ:function(){var y=this._.children,z;for(z=0;z<y.length;z++){if(y[z].getElement().$.checked){y[z].getElement().focus();return;}}y[0].getElement().focus();},dm:{onChange:function(y,z){if(!i)return v.onChange.apply(this,arguments);else{y.on('load',function(){var A=this._.children,B=this;for(var C=0;C<A.length;C++){var D=A[C].getElement();D.on('propertychange',function(E){E=E.data.$;if(E.propertyName=='checked'&&this.$.checked)B.oW('change',{value:this.getAttribute('value')});});}},this);this.on('change',z);}return null;}},eA:true},u,true);p.dialog.file.prototype=k.extend(new p.dialog.dD(),u,{getInputElement:function(){var y=a.document.getById(this._.gL).getFrameDocument();return y.$.forms.length>0?new m(y.$.forms[0].elements[0]):this.getElement();},submit:function(){this.getInputElement().getParent().$.submit();return this;},vy:function(y){return this.getInputElement().getParent().$.action;},reset:function(){var y=a.document.getById(this._.gL),z=y.getFrameDocument(),A=this._.dg,B=this._.buttons;function C(){z.$.open();if(h.isCustomDomain())z.$.domain=document.domain;var D='';if(A.size)D=A.size-(i?7:0);z.$.write(['<html><head><title></title></head><body style="margin: 0; overflow: hidden; background: transparent;">','<form enctype="multipart/form-data" method="POST" action="',k.htmlEncode(A.action),'">','<input type="file" name="',k.htmlEncode(A.id||'cke_upload'),'" size="',k.htmlEncode(D>0?D:''),'" />','</form>','</body></html>'].join(''));z.$.close();for(var E=0;E<B.length;E++)B[E].enable();};if(h.gecko)setTimeout(C,500);else C();},getValue:function(){return '';},dm:v,eA:true},true);p.dialog.fileButton.prototype=new p.dialog.button();a.dialog.addUIElement('text',s);a.dialog.addUIElement('password',s);a.dialog.addUIElement('textarea',t);a.dialog.addUIElement('checkbox',t);a.dialog.addUIElement('radio',t);a.dialog.addUIElement('button',t);a.dialog.addUIElement('select',t);a.dialog.addUIElement('file',t);a.dialog.addUIElement('fileButton',t);a.dialog.addUIElement('html',t);k.extend(CKFinder.dialog,a.dialog);})();(function(){o.add('help',{bM:['toolbar','button'],bz:function s(r){if(!r.config.disableHelpButton){r.bD('help',{exec:function(t){t.ld['filesview.filesview'].bn().focus();window.open(a.basePath+'help/'+(t.lang.HelpLang||'en')+'/index.html');}});r.bY.add('Help',a.UI_BUTTON,{label:r.lang.Help,command:'help'});}}});})();(function(){var r=1,s=2,t=3,u=4,v=5,w=0,x=0,y=[],z,A;function B(J,K,L,M,N){var O=0,P=0,Q=[];for(var R=0;R<J.length;R++){if(!M||M(J[R])){Q.push('<a href="',J[R].getUrl(),'" title="',J[R].name,'" rel="',L,'">a</a>');if(J[R].isSameFile(K))O=P;P++;}}E();A=new m('div',N);A.setAttribute('id','ckf_gallery');A.setHtml(Q.join(''));A.appendTo(N.bH());A.hide();return O;};function C(J){if(J&&J.inPopup){var K=new l(J.document),L=K.getWindow();if(!i&& !h.opera||L.$.top.location.href.match(/ckfinder.html/)||L.$.top.name=='CKFinderpopup')return K;}return a.oC;};function D(J){return function(){J.$.activeElement&&J.$.activeElement.blur();J.$.activeElement&&J.$.activeElement.blur();if(!h.gecko){J.getWindow().focus();J.bH().focus();}};};function E(){A&&A.remove();};function F(J){return function(){E();J&&J.focus(true,true);};};function G(J){if(J.click)J.click();else if(a.document.$.createEvent){var K=a.document.$.createEvent('MouseEvents');K.initEvent('click',true,true);J.dispatchEvent(K);}};function H(J,K,L){if(i&&h.version<9)J.$.onreadystatechange=function(){if(this.readyState=='loaded'||this.readyState=='complete')setTimeout(function(){K.callee.apply(L,K);},0);};else J.on('load',function(){setTimeout(function(){K.callee.apply(L,K);},0);});};CKFinder.addPlugin('gallery',{bM:['filesview'],appReady:function(){w=0;x=0;y=[];z=null;A=null;},galleryCallback:function(J,K,L){if(!x)I(null,J);var M=C(J),N=M.getWindow().$,O=function(aT){return aT.isImage();};if(!w&&J.config.gallery_autoLoad){if(!O(K))return false;var P=M.getHead(),Q=CKFinder.getPluginPath('gallery')+'colorbox/',R=arguments,S,T=typeof N.jQuery=='undefined';if(!T){var U=N.jQuery.fn.jquery.split('.'),V=parseInt(U[0],10),W=parseInt(U[1],10),X=parseInt(U[2]||0,10);if(V<1||V==1&&W<4||V==1&&W==4&&X<3)T=true;}if(T){if(N.jQuery)y=[N.jQuery,N.$];S=new m('script',M);S.setAttribute('type','text/javascript');S.setAttribute('src',Q+'jquery.min.js');H(S,R,N);S.appendTo(P);return true;}M.appendStyleSheet(Q+'colorbox.css');S=new m('script',M);S.setAttribute('type','text/javascript');S.setAttribute('src',Q+'jquery.colorbox-min.js');H(S,R,N);S.appendTo(P);return true;}if(y.length){z=N.jQuery.noConflict(true);N.jQuery=y[0];N.$=y[1];y=[];}if(!z)z=N.jQuery;if(w){var Y=k.getNextNumber(),Z,aa='ckf_gallery_'+Y;switch(w){case r:if(!O(K))return false;Z=B(L,K,aa,O,M);z('#ckf_gallery a').colorbox(k.extend({minWidth:'300',minHeight:'200',maxWidth:'95%',maxHeight:'95%',scalePhotos:true,current:J.lang.Gallery.current},J.config.gallery_config,{rel:aa,group:aa,onClosed:F(K),onOpen:D(M)},true)).eq(Z).click();break;case s:O=function(aT){return aT.isImage()||aT.ext=='swf';};if(!O(K))return false;Z=B(L,K,aa,O,M);N.jQuery('#ckf_gallery a').fancybox(k.extend({},J.config.gallery_config,{onClosed:E,onComplete:D(M),afterClose:F(K),afterShow:D(M)},true)).eq(Z).click();break;case t:O=function(aT){return aT.isImage()||aT.ext=='swf'||aT.ext=='mov';};if(!O(K))return false;Z=B(L,K,'prettyPhoto[ckf_gallery_'+Y+']',O,M);N.jQuery('#ckf_gallery a').prettyPhoto(k.extend({},J.config.gallery_config,{callback:F(K),changepicturecallback:D(M)},true)).eq(Z).click();break;case u:O=function(aT){return aT.isImage()||aT.ext=='swf'||aT.ext=='mov';};if(!O(K))return false;Z=B(L,K,aa,O,M);N.Shadowbox.qi('#ckf_gallery a',k.extend({},J.config.gallery_config,{gallery:aa,onClose:F(K),onFinish:D(M)},true));G(A.eG('a').getItem(Z).$);break;case v:if(!O(K))return false;Z=B(L,K,'lightbox[ckf_gallery_'+Y+']',O,M);G(A.eG('a').getItem(Z).$);break;default:return false;}return true;}return false;},bz:I});function I(J,K){if(J&&J.inPopup)return;J&&J.ld['filesview.filesview'].on('afterRenderFiles',E);var L=C(K).getWindow().$;if(typeof L.jQuery!='undefined'&&L.jQuery.fn.colorbox)w=r;else if(typeof L.jQuery!='undefined'&&L.jQuery.fn.fancybox)w=s;else if(typeof L.jQuery!='undefined'&&L.jQuery.fn.prettyPhoto)w=t;else if(typeof L.Shadowbox!='undefined')w=u;else if(typeof L.Prototype!='undefined'&&typeof L.Lightbox!='undefined')w=v;w&&(x=1);};})();n.gallery_autoLoad=true;(function(){function r(x){if(!x||x.type!=a.cv||x.getName()!='form')return[];var y=[],z=['style','className'];for(var A=0;A<z.length;A++){var B=z[A],C=x.$.elements.namedItem(B);if(C){var D=new m(C);y.push([D,D.nextSibling]);D.remove();}}return y;};function s(x,y){if(!x||x.type!=a.cv||x.getName()!='form')return;if(y.length>0)for(var z=y.length-1;z>=0;z--){var A=y[z][0],B=y[z][1];if(B)A.insertBefore(B);else A.appendTo(x);}};function t(x,y){var z=r(x),A={},B=x.$;if(!y){A['class']=B.className||'';B.className='';}A.inline=B.style.cssText||'';if(!y)B.style.cssText='position: static; overflow: visible';s(z);return A;};function u(x,y){var z=r(x),A=x.$;if('class'in y)A.className=y['class'];if('inline'in y)A.style.cssText=y.inline;s(z);};var v=null,w=null;o.add('maximize',{bz:function(x){var y=x.lang.Maximize,z=a.oC,A=z.getWindow(),B,C=[0,0,0,0],D={},E,F;B=a.document.getWindow().$;try{B=B.frameElement;}catch(H){B=null;}B=B&&new m(B);if(B&& !B.getFrameDocument().bH().hasClass('CKFinderFrameWindow'))B=null;function G(I){var J=A.eR();if(!I&&B)I=[B];if(I){for(var K=0,L=I.length;K<L;K++)I[K].setStyles({width:J.width+'px',height:J.height+'px'});x.oW('resize');}else x.resize(J.width,J.height);};x.bD('maximize',{oD:false,exec:function(){var I=x.document.getWindow().$;if(x.cg.inPopup&&(!i&& !h.opera||I.top.location.href.match(/ckfinder.html/)||I.top.name=='CKFinderpopup')){var I=x.document.getWindow().$.parent;if(this.bu==a.aS){C[2]=I.screenLeft||I.screenX;C[3]=I.screenTop||I.screenY;I.moveTo(0,0);if(!w)w=[I.screenLeft||I.screenX,I.screenTop||I.screenY];C[2]-=w[0];C[3]-=w[1];if(!I.outerHeight){C[0]=I.document.body.scrollWidth;C[1]=I.document.body.scrollHeight;if(!v){I.resizeTo(I.screen.availWidth,I.screen.availHeight);v=[I.screen.availWidth-I.document.body.scrollWidth,I.screen.availHeight-I.document.body.scrollHeight];}C[0]+=v[0];C[1]+=v[1];}else{C[0]=I.outerWidth;C[1]=I.outerHeight;}if(I.resizeTo)I.resizeTo(I.screen.availWidth,I.screen.availHeight);else{I.outerHeight=I.screen.availHeight;I.outerWidth=I.screen.availWidth;}}else{if(I.resizeTo)I.resizeTo(C[0],C[1]);else{I.outerWidth=C[0];I.outerHeight=C[1];}I.moveTo(C[2],C[3]);}}else{var J=B||x.container;if(this.bu==a.aS){E=A.hV();var K=J,L;while(K=K.getParent()){L=k.getNextNumber();D[L]=t(K);K.$.og=L;K.is('html','body')&&K.setStyle('overflow','hidden');K.setStyle('z-index',x.config.baseFloatZIndex-1);}L=k.getNextNumber();D[L]=t(J,true);J.$.og=L;var M=[J],I=J.getDocument().getWindow().$;while(I.frameElement){M.push(m.eB(I.frameElement));I=I.parent;}F=function(){G(M);};A.on('resize',F);var N=new l(I.document),O={overflow:h.webkit?'':'hidden',width:0,height:0};N.gT().setStyles(O);!h.gecko&&N.gT().setStyle('position','fixed');N.bH().setStyles(O);i?setTimeout(function(){A.$.scrollTo(0,0);},0):A.$.scrollTo(0,0);var P;for(var Q=0,R=M.length;Q<R;Q++){P=M[Q];P.setStyle('position','absolute');P.$.offsetLeft;P.setStyles({'z-index':x.config.baseFloatZIndex-1,left:'0px',top:'0px'});}M[0].addClass('cke_maximized');G(M);var S=M[0].ir();M[0].setStyles({left: -1*S.x+'px',top: -1*S.y+'px'});}else{A.removeListener('resize',F);var K=J;while(K){u(K,D[K.$.og]);K.$.og=null;K=K.getParent();}D={};i?setTimeout(function(){A.$.scrollTo(E.x,E.y);},0):A.$.scrollTo(E.x,E.y);J.removeClass('cke_maximized');if(h.webkit){J.setStyle('display','inline');setTimeout(function(){J.setStyle('display','block');},0);}x.oW('resize');}}this.rJ();var T=this.pW[0];if(T){var U=this.bu==a.aS?y.maximize:y.minimize,V=x.document.getById(T._.id);V.getChild(1).setHtml(U);V.setAttribute('title',U);V.setAttribute('href','javascript:void("'+U+'");');}}});x.bY.qW('Maximize',{label:y.maximize,command:'maximize'});}});})();(function(){var r={};CKFinder.addPlugin('zip',{uiReady:function(t){var u=t.lang.Zip;CKFinder.dialog.add('compressToFileName',function(v){var w=v.getSelectedFolder();return{title:v.lang.DestinationFile,minWidth:270,minHeight:60,contents:[{id:'tab1',label:'',title:'',expand:true,style:CKFinder.env.ie7Compat?'height:auto':'',padding:0,elements:[{id:'msg',className:'cke_dialog_error_msg',type:'html',html:v.lang.FileRename},{type:'hbox',widths:['90%','10%'],padding:0,children:[{type:'text',label:'',id:'fileName','default':w.name,validate:function(){if(!this.getValue()){v.openMsgDialog('',v.lang.ErrorMsg.FileEmpty);return false;}}},{type:'html',html:'.zip',id:'fileNameExt',onLoad:function(){this.getElement().getParent().setStyles({'vertical-align':'bottom','padding-bottom':'2px'});}}]}]}],buttons:[CKFinder.dialog.okButton,CKFinder.dialog.cancelButton]};});CKFinder.dialog.add('unzipDirExists',function(v){var w=v.getSelectedFolder(),x=[[v.lang.ManuallyRename,'manuallyrename']];if(w.acl.fileDelete&&w.acl.fileRename&&w.acl.folderRename&&w.acl.folderDelete)x.push([u.removeAndExtract,'overwrite'],[u.extractAndOverwrite,'merge']);return{title:v.lang.ErrorMsg.FolderNameExists,minWidth:270,minHeight:60,contents:[{id:'tab1',label:'',title:'',expand:true,style:CKFinder.env.ie7Compat?'height:auto':'',padding:0,elements:[{id:'msg',className:'cke_dialog_error_msg',type:'html',html:''},{type:'hbox',className:'cke_dialog_file_exist_options',children:[{label:v.lang.common.makeDecision,type:'radio',id:'option','default':'manuallyrename',items:x}]}]}],onOk:function(){var y=this,z=y.getValueOf('tab1','option');if(z=='manuallyrename')z=null;r.extractTo(v.getSelectedFile(),z);return true;},onCancel:function(){r.ma(w);return true;},buttons:[CKFinder.dialog.okButton,CKFinder.dialog.cancelButton]};});CKFinder.dialog.add('unzipFileExists',function(v){var w=v.getSelectedFolder();return{title:v.lang.FileExistsDlgTitle,minWidth:350,minHeight:120,contents:[{id:'tab1',label:'',title:'',style:CKFinder.env.ie7Compat?'height:auto':'',expand:true,padding:0,elements:[{id:'msg',className:'cke_dialog_error_msg',type:'html',widths:['70%','30%'],html:''},{type:'hbox',className:'cke_dialog_file_exist_options',children:[{type:'radio',id:'option',label:v.lang.common.makeDecision,'default':'autorename',items:[[v.lang.FileAutorename,'autorename'],[v.lang.FileOverwrite,'overwrite'],[v.lang.common.skip,'skip']]}]},{type:'hbox',className:'cke_dialog_remember_decision',children:[{type:'checkbox',id:'remember',label:v.lang.common.rememberDecision}]}]}],onCancel:function(){r.ma(w);return true;},buttons:[CKFinder.dialog.okButton,CKFinder.dialog.cancelButton]};});CKFinder.dialog.add('compressFileExists',function(v){var w=v.getSelectedFolder(),x=[[v.lang.ManuallyRename,'manuallyrename']];if(w.acl.fileDelete&&w.acl.fileRename)x.push([v.lang.FileAutorename,'autorename'],[v.lang.FileOverwrite,'overwrite']);return{title:v.lang.FileExistsDlgTitle,minWidth:270,minHeight:60,contents:[{id:'tab1',label:'',title:'',expand:true,style:CKFinder.env.ie7Compat?'height:auto':'',padding:0,elements:[{id:'msg',className:'cke_dialog_error_msg',type:'html',html:''},{type:'hbox',className:'cke_dialog_file_exist_options',children:[{label:v.lang.common.makeDecision,type:'radio',id:'option','default':'manuallyrename',items:x}]}]}],onOk:function(){var y=this,z=y.getValueOf('tab1','option');if(z=='manuallyrename')z=null;r.nX(v.getSelectedFolder(),r.pp.download,z);return true;},onCancel:function(){r.ma(w);return true;},buttons:[CKFinder.dialog.okButton,CKFinder.dialog.cancelButton]};});t.connector.app.dZ('zip',112);r={rQ:{iz:/[\\\/:\*\?"<>\|]/},iG:{extractHere:{label:u.extractHereLabel,command:'ExtractHere',group:'zip',icon:CKFinder.getPluginPath('zip')+'images/zip.gif'},extractTo:{label:u.extractToLabel,command:'ExtractTo',group:'zip',icon:CKFinder.getPluginPath('zip')+'images/zip.gif'},downloadZip:{label:u.downloadZipLabel,command:'DownloadZip',group:'zip',icon:CKFinder.getPluginPath('zip')+'images/zip.gif'},compressZip:{label:u.compressZipLabel,command:'CompressZip',group:'zip',icon:CKFinder.getPluginPath('zip')+'images/zip.gif'}},ma:function(v){v.getChildren(function(w){v.close();v.showFiles();v.open();},true);},oc:function(v){if(!v|| !v.length)return t.lang.ErrorMsg.FolderEmpty;if(r.rQ.iz.test(v))return t.lang.ErrorMsg.FolderInvChar;return false;},nI:function(v){if(!r.filesList[r.currentItem]){r.extractHere(t.getSelectedFile(),true);return;}var w=[{name:'skip'},{name:'ok'}];if(r.filesList[r.currentItem].options&&s(r.filesList[r.currentItem].options,w)){r.currentItem++;t.openDialog('unzipFileExists',r.nI);return;}v.show();var x=t.lang.ErrorMsg[r.filesList[r.currentItem].type=='Folder'?'FolderExists':'FileExists'];x='<strong>'+x.replace('%s',r.filesList[r.currentItem].name)+'</strong>';v.getContentElement('tab1','msg').getElement().setHtml(x);v.on('ok',function(y){y.removeListener();var z=v.getValueOf('tab1','remember'),A=v.getValueOf('tab1','option');if(z){for(var B=0,C=r.filesList.length;B<C;B++){if(!r.filesList[B].options)r.filesList[B].options=A;}r.extractHere(t.getSelectedFile(),true);return;}else{r.filesList[r.currentItem].options=A;r.currentItem++;while(r.currentItem<r.filesList.length){if(!r.filesList[r.currentItem].options||r.filesList[r.currentItem].options&&r.filesList[r.currentItem].options!='skip')break;r.currentItem++;}if(r.currentItem<r.filesList.length){setTimeout(function(){t.openDialog('unzipFileExists',r.nI);},0);return;}else{r.extractHere(t.getSelectedFile(),true);return;}}});},extract:function(v){var w={},x=v.file;if(v.extra)w=v.extra;w.fileName=v.file.name;t.connector.sendCommandPost(v.action,null,w,function(y){r.filesList=[];if(y.getErrorNumber()==303){r.currentItem=0;var z=y.selectNodes('Connector/Errors/Error'),A=y.selectNodes('Connector/UnzippedFiles/File'),B=0,C;for(var D=0,E=z.length;D<E;D++){C='skip';if(z[D].getAttribute('code')==115){B=1;C=null;}r.filesList[D]={name:z[D].getAttribute('name'),options:C,type:z[D].getAttribute('type'),code:z[D].getAttribute('code')};}for(var F=0,E=A.length;F<E;F++,D++)r.filesList[D]={name:A[F].getAttribute('name'),options:A[F].getAttribute('action'),type:'File',code:0};if(B){t.openDialog('unzipFileExists',r.nI);return;}}else if(y.checkError())return;var G=y.selectNodes('Connector/FolderExists/Folder');if(G&&G.length){t.openDialog('unzipDirExists',function(J){J.show();var K=t.lang.FolderNameExists;K='<strong>'+K.replace('%s',G[0].getAttribute('name'))+'</strong>';J.getContentElement('tab1','msg').getElement().setHtml(K);});return;}var A=y.selectNodes('Connector/UnzippedFiles/File');if(A&&A.length){var H=[];for(var D=0,I=A.length;D<I;D++){if(A[D].getAttribute('action')=='skip')H.push(A[D].getAttribute('name'));}if(r.filesList)for(var D=0,I=r.filesList.length;D<I;D++)H.push(r.filesList[D].name);if(H.length){t.openSkippedFilesDialog(null,H,u.extractSuccess);r.ma(t.getSelectedFolder());return true;}}t.openMsgDialog('OK',u.extractSuccess);r.ma(t.getSelectedFolder());return true;},x.folder.type,x.folder);},extractHere:function(v,w){if(w){var x=false;for(var y=0,z=r.filesList.length;y<z;y++){if(r.filesList[y].code==115&&r.filesList[y].options!='skip'){x=true;w={};for(var y=0,z=r.filesList.length;y<z;y++){w['files['+y+'][name]']=r.filesList[y].name;w['files['+y+'][options]']=r.filesList[y].options;}break;}}if(!x){var A=[];for(var y=0,z=r.filesList.length;y<z;y++)A.push(r.filesList[y].name);t.openSkippedFilesDialog(null,A,u.extractSuccess,function(){r.ma(t.getSelectedFolder());return true;});return;}}w=w||{};r.extract({action:'ExtractHere',file:v,extra:w});},extractTo:function(v,w){if(w){r.extract({action:'ExtractTo',file:v,extra:{extractDir:r.extractDir||'/',force:w}});return;}t.openInputDialog(t.lang.DestinationFolder,t.lang.FolderRename,'',function(x){var y=t.getSelectedFolder(),x=CKFinder.tools.trim(x),z=r.oc(x);if(z){t.openConfirmDialog('',z,function(A){r.extractTo(v,w);});return false;}r.extractDir=x;if(!y.hasChildren){y.createNewFolder(x);r.extract({action:'ExtractTo',file:v,extra:{extractDir:x}});}else y.getChildren(function(A){if(!s(x,A))r.extract({action:'ExtractTo',file:v,extra:{extractDir:x}});else{t.openDialog('unzipDirExists',function(B){B.show();var C=t.lang.ErrorMsg.FolderExists;C='<strong>'+C.replace('%s',x)+'</strong>';B.getContentElement('tab1','msg').getElement().setHtml(C);});return;}},true);});},downloadZip:function(v,w,x){var y=t.connector.composeUrl('DownloadZip',{FileName:v,ZipName:w},x.type,x);t.connector.app.ld['filesview.filesview'].tools.downloadFile(new CKFinder.dom.document(t.document),y);},oH:function(v,w){t.connector.sendCommandPost('CreateZip',null,w,function(x){if(x.checkError())return;if(w.download){var y=x.selectSingleNode('Connector/ZipFile');if(y){var y=y.getAttribute('name');return r.downloadZip(y,w.zipName,v);}}r.ma(v);},v.type,v);},nX:function(v,w,x,y){var z={zipName:v.name+'.zip',download:w};if(y)for(var A=0,B=y.length;A<B;A++){z['files['+A+'][name]']=y[A].name;z['files['+A+'][type]']=y[A].folder.type;z['files['+A+'][folder]']=y[A].folder.getPath();}if(x){z=r.pp;z.fileExistsAction=x;return r.oH(v,z);}if(v.isBasket||w){if(v.isBasket&&typeof y==='undefined'){z.zipName='basket.zip';for(var A=0,B=t.basketFiles.length;A<B;A++){z['files['+A+'][name]']=t.basketFiles[A].name;z['files['+A+'][type]']=t.basketFiles[A].folder.type;z['files['+A+'][folder]']=t.basketFiles[A].folder.getPath();}}if(v.isBasket){v=t.folders[1];z.basket=true;}return r.oH(v,z);}else t.openDialog('compressToFileName',function(C){C.show();C.getContentElement('tab1','fileName').getElement().setValue(v.name);C.on('ok',function(D){D.removeListener();var E=C.getValueOf('tab1','fileName');E=CKFinder.tools.trim(E)+'.zip';var F=r.oc(E);if(F){t.openConfirmDialog('',F,function(G){r.nX(v,w);});return false;}else{z.zipName=E;v.getFiles(function(G){if(s(E,G)){r.pp=z;t.openDialog('compressFileExists',function(H){H.show();var I=t.lang.ErrorMsg.FileExists;I='<strong>'+I.replace('%s',E)+'</strong>';H.getContentElement('tab1','msg').getElement().setHtml(I);});return false;}else r.oH(v,z);},true);}});});}};t.addFileContextMenuOption(r.iG.extractHere,function(v,w){r.extractHere(w);},function(v){var w=t.getSelectedFolder();if(w.isBasket)return false;var x=t.getSelectedFiles();if(v.ext.toLowerCase()!=='zip'||t.config.selectMultiple&&x.length>1)return false;return v.folder.acl.fileUpload&&v.folder.acl.folderCreate?true: -1;});t.addFileContextMenuOption(r.iG.extractTo,function(v,w){r.extractTo(w);},function(v){var w=t.getSelectedFolder();if(w.isBasket)return false;var x=t.getSelectedFiles();if(v.ext.toLowerCase()!=='zip'||t.config.selectMultiple&&x.length>1)return false;return v.folder.acl.fileUpload&&v.folder.acl.folderCreate?true: -1;});t.addFileContextMenuOption(r.iG.compressZip,function(v,w){var x=v.getSelectedFiles(),y=v.getSelectedFolder();r.nX(y,false,false,x);},function(v){var w=t.getSelectedFolder();if(w.isBasket)return false;var x=t.getSelectedFiles();if(!t.config.selectMultiple||x.length<2)return false;return v.folder.acl.fileUpload&&v.folder.acl.folderCreate&&w.getResourceType().isExtensionAllowed('zip')?true: -1;});t.addFileContextMenuOption(r.iG.downloadZip,function(v,w){var x=v.getSelectedFiles(),y=v.getSelectedFolder();r.nX(y,true,false,x);},function(v){var w=t.getSelectedFiles();if(!t.config.selectMultiple||w.length<2)return false;return v.folder.acl.fileUpload?true: -1;});t.addFolderContextMenuOption(r.iG.compressZip,function(v,w){r.nX(w,false);},function(v){if(v.isBasket)return false;return v.acl.fileUpload&&v.getResourceType().isExtensionAllowed('zip')&&(t.files.length||v.hasChildren)?true: -1;});t.addFolderContextMenuOption(r.iG.downloadZip,function(v,w){r.nX(w,true);},function(v){if(v.isBasket)return v.app.basketFiles.length?true: -1;return v.acl.fileUpload&&(t.files.length||v.hasChildren)?true: -1;});t.connector.app.ld['filesview.filesview'].on('beforeContextMenu',function(v){if(t.getSelectedFiles().length>1)delete v.data.bj.downloadFile;});},basketToolbar:[['DownloadZip',{label:'downloadZipLabel',icon:CKFinder.getPluginPath('zip')+'images/zip.gif',onClick:function(t){var u=t.getSelectedFolder();u.app.basketFiles.length&&r.nX(u,true);},disableEmpty:true}]]});function s(t,u){for(var v=0,w=u.length;v<w;v++){if(u[v].name&&u[v].name===t)return true;}return false;};})();a.skins.add('kama',(function(){var r=['images/loaders/16x16.gif','images/loaders/32x32.gif','images/ckffolder.gif','images/ckffolderopened.gif'];if(i&&h.version<7)r.push('images/sprites_ie6.png');return{ls:r,application:{css:['app.css']},host:{qx:1,css:['host.css']},mA:7,kN:7,ps:1,bz:function(s){if(s.config.width&& !isNaN(s.config.width))s.config.width-=12;var t=[],u='/* UI Color Support */.cke_skin_kama .cke_menuitem .cke_icon_wrapper{\tbackground-color: $color !important;\tborder-color: $color !important;}.cke_skin_kama .cke_menuitem a:hover .cke_icon_wrapper,.cke_skin_kama .cke_menuitem a:focus .cke_icon_wrapper,.cke_skin_kama .cke_menuitem a:active .cke_icon_wrapper{\tbackground-color: $color !important;\tborder-color: $color !important;}.cke_skin_kama .cke_menuitem a:hover .cke_label,.cke_skin_kama .cke_menuitem a:focus .cke_label,.cke_skin_kama .cke_menuitem a:active .cke_label{\tbackground-color: $color !important;}.cke_skin_kama .cke_menuitem a.cke_disabled:hover .cke_label,.cke_skin_kama .cke_menuitem a.cke_disabled:focus .cke_label,.cke_skin_kama .cke_menuitem a.cke_disabled:active .cke_label{\tbackground-color: transparent !important;}.cke_skin_kama .cke_menuitem a.cke_disabled:hover .cke_icon_wrapper,.cke_skin_kama .cke_menuitem a.cke_disabled:focus .cke_icon_wrapper,.cke_skin_kama .cke_menuitem a.cke_disabled:active .cke_icon_wrapper{\tbackground-color: $color !important;\tborder-color: $color !important;}.cke_skin_kama .cke_menuitem a.cke_disabled .cke_icon_wrapper{\tbackground-color: $color !important;\tborder-color: $color !important;}.cke_skin_kama .cke_menuseparator{\tbackground-color: $color !important;}.cke_skin_kama .cke_menuitem a:hover,.cke_skin_kama .cke_menuitem a:focus,.cke_skin_kama .cke_menuitem a:active{\tbackground-color: $color !important;}';if(h.webkit){u=u.split('}').slice(0,-1);for(var v=0;v<u.length;v++)u[v]=u[v].split('{');}function w(z){var A=z.getHead().append('style');A.setAttribute('id','cke_ui_color');A.setAttribute('type','text/css');return A;};function x(z,A,B){var C,D,E;for(var F=0;F<z.length;F++){if(h.webkit){for(D=0;D<z[F].$.sheet.rules.length;D++)z[F].$.sheet.removeRule(D);for(D=0;D<A.length;D++){E=A[D][1];for(C=0;C<B.length;C++)E=E.replace(B[C][0],B[C][1]);z[F].$.sheet.addRule(A[D][0],E);}}else{E=A;for(C=0;C<B.length;C++)E=E.replace(B[C][0],B[C][1]);if(i)z[F].$.styleSheet.cssText=E;else z[F].setHtml(E);}}};var y=/\$color/g;k.extend(s,{uiColor:null,rk:function(){return this.uiColor;},setUiColor:function(z){var A,B,C=w(a.oC),D=w(this.document),E='.cke_'+s.name.replace('.','\\.'),F=[E+' .cke_wrapper',E+'_dialog .cke_dialog_contents',E+'_dialog a.cke_dialog_tab',E+'_dialog .cke_dialog_footer'].join(','),G='background-color: $color !important;';if(h.webkit){A=[[F,G]];B=[['body,'+F,G]];}else{A=F+'{'+G+'}';B='body,'+F+'{'+G+'}';}return(this.setUiColor=function(H){var I=[[y,H]];s.uiColor=H;x([C],A,I);x([D],B,I);x(t,u,I);})(z);}});s.on('menuShow',function(z){var A=z.data[0],B=A.element.eG('iframe').getItem(0).getFrameDocument();if(!B.getById('cke_ui_color')){var C=w(B);t.push(C);var D=s.rk();if(D)x([C],u,[[y,D]]);}});if(s.config.uiColor)s.on('uiReady',function(){s.setUiColor(s.config.uiColor);});}};})());(function(){a.dialog?r():a.on('dialogPluginReady',r);function r(){a.dialog.on('resize',function(s){var t=s.data,u=t.width,v=t.height,w=t.dialog,x=w.bO.contents;if(t.skin!='kama')return;x.setStyles({width:u+'px',height:v+'px'});setTimeout(function(){var y=w.bO.dialog.getChild([0,0,0]),z=y.getChild(0),A=y.getChild(2);A.setStyle('width',z.$.offsetWidth+'px');A=y.getChild(7);A.setStyle('width',z.$.offsetWidth-28+'px');A=y.getChild(4);A.setStyle('height',z.$.offsetHeight-31-14+'px');A=y.getChild(5);A.setStyle('height',z.$.offsetHeight-31-14+'px');},100);});};})();a.skins.add('v1',(function(){var r=['images/loaders/16x16.gif','images/loaders/32x32.gif','images/ckffolder.gif','images/ckffolderopened.gif'];if(i&&h.version<7)r.push('images/sprites_ie6.png');return{ls:r,application:{css:['app.css']},ps:1,rv: -8,kN:0,host:{qx:1,css:['host.css']}};})());(function(){a.dialog?r():a.on('dialogPluginReady',r);function r(){a.dialog.on('resize',function(s){var t=s.data,u=t.width,v=t.height,w=t.dialog,x=w.bO.contents;if(t.skin!='v1')return;x.setStyles({width:u+'px',height:v+'px'});setTimeout(function(){var y=w.bO.dialog.getChild([0,0,0]),z=y.getChild(0),A=y.getChild(2);A.setStyle('width',z.$.offsetWidth+'px');A=y.getChild(7);A.setStyle('width',z.$.offsetWidth-28+'px');A=y.getChild(4);A.setStyle('height',z.$.offsetHeight-31-14+'px');A=y.getChild(5);A.setStyle('height',z.$.offsetHeight-31-14+'px');},100);});};})();a.gc.add('default',(function(){return{dQ:function(r){var s=r.name,t=r.element,u=r.ff;if(!t||u==a.kZ)return;r.layout=new a.application.layout(r);var v=r.oW('themeSpace',{space:'head',html:''}),w=r.oW('themeSpace',{space:'sidebar',html:''}),x=r.oW('themeSpace',{space:'mainTop',html:''}),y=r.oW('themeSpace',{space:'mainMiddle',html:''}),z=r.oW('themeSpace',{space:'mainBottom',html:''}),A=r.config.skin.indexOf(','),B=(A== -1?r.config.skin:r.config.skin.substr(0,A))||'kama',C='<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"><html lang="'+r.lang.LangCode+'" dir="'+r.lang.dir+'">'+'<head>'+'<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />'+v.html+'</head>'+'<body>'+(h.ie6Compat?'<div id="ckfinder" role="application">':'<div id="ckfinder" role="application" style="visibility: hidden">')+'<!-- 1. CKE Skin class. -->'+'<div class="fake_wrapper cke_skin_'+B+'">'+'<!-- 2. High contrast class. -->'+'<div class="fake_wrapper"><!-- Applicable: hc cke_hc -->'+'<!-- 3. Browser class. -->'+'<div class="fake_wrapper '+h.cssClass+'">'+'<!-- 4. RTL class. -->'+'<div class="fake_wrapper cke_'+(r.lang.dir=='ltr'||i&&h.version<8?'ltr':'rtl')+'"><!-- Applicable: rtl cke_rtl -->'+'<!-- 5. Layout class. -->'+'<div class="fake_wrapper">'+'<div id="ckfinder_view" class="columns_2"><!-- Applicable: columns_1 columns_2 -->'+'<div id="sidebar_container" class="container" role="region"'+(r.config.sidebarWidth?' style="width: '+k.cssLength(r.config.sidebarWidth)+'"':'')+'>'+'<div id="sidebar_wrapper" class="wrapper">'+w.html+'</div>'+'</div>'+'<div id="main_container" class="container" role="region">'+x.html+y.html+z.html+'</div>'+'</div>'+'</div>'+'</div>'+'</div>'+'</div>'+'</div>'+'</div>'+'</body>'+'</html>';a.log('[THEME] DOM flush using document.write');r.document.$.write(C);function D(){if(h.ie6Compat)r.layout.oG=r.document.getWindow().eR();};r.cr('themeLoaded');r.cr('uiReady',function(){D();r.cr('appReady',function(){D();if(h.ie8){var E=r.document.$,F;if(E.documentMode)F=E.documentMode;else{F=5;if(E.compatMode)if(E.compatMode=='CSS1Compat')F=7;}if(F<8){var G='<strong style="color: red;">Forced IE compatibility mode! CKFinder may not look as intended.</strong>',H=r.plugins.tools;H.showTool(H.addTool(G));}}if(h.ie6Compat)r.document.getWindow().on('resize',D);r.document.getWindow().on('resize',function(){r.layout.ea.call(r.layout);});var I;function J(){I=I||r.document.getHead().eG('link').getItem(0);var K=0;if(I)try{if(I.$.sheet&&I.$.sheet.cssRules.length>0)K=1;else if(I.$.styleSheet&&I.$.styleSheet.cssText.length>0)K=1;else if(I.$.innerHTML&&I.$.innerHTML.length>0)K=1;}catch(L){}if(!K){window.setTimeout(J,250);return;}if(h.ie6Compat){D();r.layout.ea();setTimeout(function(){r.layout.ea();},500);}else{r.layout.ea(true);setTimeout(function(){r.document.getById('ckfinder').removeStyle('visibility');});}return undefined;};J();});});},pu:function(r){var s=k.getNextNumber(),t=m.kE(['<div class="cke_compatibility cke_'+r.name.replace('.','\\.')+'_dialog cke_skin_',r.gd,'" dir="',r.lang.dir,'" lang="',r.langCode,'"><table class="cke_dialog',' '+h.cssClass.replace(/browser/g,'cke_browser'),' cke_',r.lang.dir,'" style="position:absolute"><tr><td><div class="%body"><div id="%title#" class="%title"></div><div id="%close_button#" class="%close_button"><span>X</span></div><div id="%tabs#" class="%tabs"></div><table class="%contents"><tr><td id="%contents#" class="%contents"></td></tr></table><div id="%footer#" class="%footer"></div></div><div id="%tl#" class="%tl"></div><div id="%tc#" class="%tc"></div><div id="%tr#" class="%tr"></div><div id="%ml#" class="%ml"></div><div id="%mr#" class="%mr"></div><div id="%bl#" class="%bl"></div><div id="%bc#" class="%bc"></div><div id="%br#" class="%br"></div></td></tr></table>',i?'':'<style>.cke_dialog{visibility:hidden;}</style>','</div>'].join('').replace(/#/g,'_'+s).replace(/%/g,'cke_dialog_'),a.document),u=t.getChild([0,0,0,0,0]),v=u.getChild(0),w=u.getChild(1);v.unselectable();w.unselectable();return{element:t,bO:{dialog:t.getChild(0),title:v,close:w,tabs:u.getChild(2),contents:u.getChild([3,0,0,0]),footer:u.getChild(4)}};},destroy:function(r){var s=r.container,t=r.ia;s&&s.remove();for(var u=0;t&&u<t.length;u++)t[u].remove();if(r.element){r.ff==a.fc&&r.element.remove();delete r.element;}}};})());a.application.prototype.vU=function(r){var s=''+r,t=this._[s]||(this._[s]=a.document.getById(s+'_'+this.name));return t;};a.application.prototype.nJ=function(r){var s=/^\d+$/;if(s.test(r))r+='px';var t=this.layout.dV();t.setStyle('width',r);this.oW('resize');this.layout.ea();};a.application.prototype.resize=function(r,s){this.element.getChild(0).setStyle('height',s+'px');this.element.getChild(0).setStyle('width',r+'px');};(function(){var r="\074\x64\151\166\040\x63\154\141\163\163\075\x27\x76\x69\145\167\040\164\x6f\x6f\154\x5f\160\x61\x6e\x65\154\x27\040\x73\164\171\154\x65\x3d\x27\x70\x61\x64\x64\x69\156\147\x3a\x32\x70\170\x3b\x64\x69\x73\x70\154\x61\171\072\x62\x6c\x6f\x63\153\x20\041\x69\155\160\x6f\162\164\141\x6e\164\073\x70\157\163\151\164\x69\157\156\072\163\x74\141\x74\x69\x63\x20\x21\151\x6d\160\157\162\x74\x61\x6e\x74\073\x63\157\154\157\x72\x3a\142\154\x61\143\153\040\x21\151\x6d\160\157\162\x74\141\x6e\x74\073\142\141\x63\153\147\162\157\x75\156\144\055\143\x6f\154\x6f\x72\x3a\x77\x68\151\164\x65\x20\x21\151\x6d\x70\157\162\164\x61\156\164\x3b\x27\x3e",s="\x3c\057\144\151\x76\076",t=r+"\124\x68\151\x73\040\151\163\x20\x74\150\x65\040\104\105\115\x4f\x20\x76\145\x72\163\x69\x6f\x6e\040\x6f\146\040\x43\x4b\x46\x69\156\144\x65\x72\056\040\x50\x6c\145\141\163\x65\x20\x76\x69\x73\x69\x74\x20\164\150\x65\040\074\x61\040\150\162\x65\x66\075\047\150\164\x74\160\072\x2f\x2f\143\x6b\163\157\x75\x72\143\x65\056\143\157\x6d\057\143\153\146\x69\x6e\144\x65\162\047\x20\x74\141\162\147\145\164\075\047\x5f\142\154\141\x6e\153\047\x3e\103\113\x46\x69\x6e\144\x65\162\040\167\x65\142\040\x73\x69\164\145\074\x2f\141\076\x20\164\x6f\040\x6f\x62\164\x61\x69\156\x20\x61\040\x76\141\x6c\x69\x64\x20\154\151\x63\x65\156\163\x65\056"+s,u=r+"\x43\x4b\106\151\x6e\x64\x65\x72\x20\104\x65\x76\145\154\x6f\160\145\162\x20\114\151\143\x65\x6e\x73\x65\074\x62\162\x2f\x3e\114\x69\143\x65\x6e\x73\145\x64\x20\164\157\x3a\x20";function v(x,y){var z=0,A=0;for(var B=0;B<x.$.parentNode.childNodes.length;B++){var C=x.$.parentNode.childNodes[B];if(C.nodeType==1){var D=C==x.$;if(!C.offsetHeight&& !D)continue;A++;if(!D)z+=C.offsetHeight;}}var E=x.$.offsetHeight-x.$.clientHeight,F=(A-1)*y;if(h.ie6Compat&& !h.ie8&& !h.ie7Compat)F+=y*2;var G=i?x.$.parentNode.parentNode.parentNode.offsetHeight:x.$.parentNode.offsetHeight,H=G-E-z-(F||0);try{x.setStyle('height',H+'px');}catch(I){}};function w(x){return a.bs.substr(x*9%(2<<4),1);};a.application.layout=function(x){this.app=t.length?x:null;this.jB=null;};a.application.layout.prototype={ea:function(x){if(this.jB)return;this.jB=k.setTimeout(function(){a.log('[THEME] Repainting layout');var y=a.bs.indexOf(a.bF.substr(1,1))%5,z=[a.bF.substr(8,1),a.bF.substr(6,1)],A=a.bF&&a.bF.substr(3,1)!=a.bs.substr((a.bs.indexOf(a.bF.substr(0,1))+a.bs.indexOf(a.bF.substr(2,1)))*9%(a.bs.length-1),1),B= ! !a.ed&&z[1]!=w(a.ed.length+a.bs.indexOf(z[0]));if(a.bF&&1==y&&a.lS(window.top[a.nd+"\x63\x61\x74\151\157\156"][a.jG+"\x73\164"])!=a.lS(a.ed)||y==4||A){var C=this.dV().getChild(0).getChildren(),D=0;for(var E=0;E<C.count();E++){if(C.getItem(E).rd("\160\157\x73\151\x74\x69\157\156")=="\163\164\x61\164\x69\x63")D=1;}if(!D)this.dV().getChild(0).appendHtml(A||B||y!=4?t:u+"\x3c\142\x3e"+k.htmlEncode(a.ed)+"\x3c\057\x62\076\x3c\x2f\144\x69\x76\076");}var F=this.pn(),G=this.pS(),H=a.skins.loaded[this.app.gd];if(H.ps&&i&&h.ie6Compat&& !h.ie8){var I=this.mB(),J=this.dV(),K=3*H.kN,L=H.rv?H.rv:0,M=this.oG.width-J.$.offsetWidth-K+L;I.setStyle('width',M+'px');}if(F)v(F,H.mA);if(G)v(G,H.kN);this.jB=null;x=false;this.app.oW('afterRepaintLayout');if(h.ie6Compat)k.setTimeout(function(){this.app.element.$.style.cssText+='';},0,this);},x===true?0:500,this);},dV:function(){var x=this;if(!x.kS)x.kS=x.app.document.getById('sidebar_container');return x.kS;},mB:function(){var x=this;if(!x.lb)x.lb=x.app.document.getById('main_container');return x.lb;},pS:function(){var x=this;if(typeof x.kK==='undefined')x.kK=x.app.document.getById('folders_view');return x.kK;},pn:function(){var x=this;if(typeof x.kD==='undefined')x.kD=x.app.document.getById('files_view');return x.kD;}};})();})(); 